>https://rust-lang.github.io/rfcs/2645-transparent-unions.html

#### 1. **z机 (Motivation)**

一些联合类型（例如 `MaybeUninit<T>` 和曾经的 `ManuallyDrop<T>`）是简单的 newtype 风格包装器，包装了另一个类型。虽然这些类型的目标是与其底层类型 `T` 一样使用，但没有使用 `#[repr(transparent)]`，它们与 `T` 的内存兼容性无法明确保证。类似的情况也出现在只有一个变体的单变量枚举上，它们本质上是对另一个类型的包装。允许对这些联合和枚举使用 `#[repr(transparent)]` 能提供更好的兼容性、明确的 API 意图以及对 FFI 的透明支持。

#### 2. **透明联合与枚举的条件**

- **联合**：只有一个非零大小的字段，才能标记为 `#[repr(transparent)]`。
    
- **枚举**：必须有且只有一个变体，且该变体的类型符合透明结构的要求。
    

#### 3. **透明联合和枚举的具体例子**

- **透明联合：**