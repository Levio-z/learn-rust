# 第 36 章 维护与再工程（Maintenance and Reengineering）总结

本章围绕软件全生命周期的 “后期优化与迭代” 展开，核心覆盖软件维护的本质、可维护性设计、支持能力建设，以及再工程（含业务流程与软件）的方法体系与经济性评估，构建了 “从问题应对到价值提升” 的后期管理框架，具体内容如下：

## 一、软件维护：交付后的持续优化

### （一）维护的核心场景与定义

软件交付后，需应对三类典型需求，这些需求的处理均属于软件维护范畴：

  

1. **缺陷修复**：交付后几天内反馈的 bug（如 “登录失败、数据计算错误”）；
2. **环境适配变更**：几周内用户提出的 “适配特定使用环境” 需求（如 “兼容新操作系统、对接客户现有系统”）；
3. **功能增强**：数月内新增的潜在需求（如 “原本不相关的部门发现软件价值，需新增定制化功能”）。

### （二）可维护软件的核心特性（Maintainable Software）

可维护性是软件设计阶段需植入的关键属性，决定后续维护的效率与成本，具体表现为 5 个维度：

  

1. **有效模块化**：模块低耦合、高内聚，修改一个模块不影响其他模块；
2. **设计模式复用**：采用通用设计模式（如工厂模式、观察者模式），降低理解成本（维护人员可通过模式快速掌握逻辑）；
3. **规范编码与自文档化**：遵循统一编码标准（如命名规范、注释要求），代码本身具备可读性（如 “变量名反映用途”）；
4. **前置质量保障**：通过评审、测试等手段，在交付前暴露潜在维护问题（如 “未处理的异常、冗余代码”）；
5. **面向未来的设计**：开发人员需预判后续变更可能性，设计预留扩展空间（如 “用配置文件而非硬编码实现参数控制”）。

## 二、软件支持性（Software Supportability）：维护的支撑能力

### （一）支持性的定义

支持性指 “软件在全生命周期内被有效支持的能力”，不仅包含满足维护需求，还需提供 “设备、基础设施、额外软件、人力” 等资源，确保软件持续稳定运行并实现功能目标 [SSO08]。

### （二）支持性的核心保障措施

1. **问题定位辅助**：软件需内置 “缺陷诊断工具”（如日志系统、错误报告功能），帮助支持人员快速定位运行环境中的缺陷；
2. **缺陷知识库**：建立 “历史缺陷数据库”，记录已发现缺陷的 “特征、根源、解决方案”（如 “2024-03-01，登录超时 bug，原因是会话过期时间过短，解决方案是延长至 30 分钟”），避免重复排查。

## 三、再工程（Reengineering）：从业务到软件的全面升级

再工程是对 “现有业务流程、IT 系统、软件应用” 进行系统性重构，以提升效率、适配新需求，分为 “业务流程再工程” 与 “软件再工程” 两大维度。

### （一）业务流程再工程（BPR，36.4）

BPR 聚焦 “重构业务流程以实现战略目标”，需遵循 “定义 - 识别 - 评估 - 设计 - 验证 - 落地” 六步流程，并依托核心原则确保效果。

#### 1. BPR 实施流程

|步骤|核心内容|
|---|---|
|1. 业务定义（Business Definition）|基于 “成本降低、时间缩短、质量提升、人员赋能” 四大驱动因素，明确业务目标（如 “将订单处理时间从 2 天缩短至 4 小时”）。|
|2. 流程识别（Process Identification）|筛选对目标有关键影响的核心流程（如 “订单处理流程、库存管理流程”）。|
|3. 流程评估（Process Evaluation）|全面分析现有流程，量化问题（如 “订单处理需 5 个部门审批，存在 3 处冗余环节”）。|
|4. 流程规格与设计（Process Specification & Design）|基于前序分析，用例（use-cases）描述重构后的流程逻辑（如 “订单自动校验环节替代人工审批”）。|
|5. 原型验证（Prototyping）|搭建重构流程的原型，模拟运行并收集反馈（如 “用 Excel 模拟新订单流程，验证时间是否达标”）。|
|6. 优化与落地（Refinement & Instantiation）|根据原型反馈优化流程，最终在业务系统中正式部署。|

#### 2. BPR 核心原则（7 大原则）

- 围绕 “结果” 而非 “任务” 组织流程（如 “以‘完成订单’为目标，而非‘录入订单、审核订单’等独立任务”）；
- 让 “流程输出的使用者” 执行流程（如 “让客服直接处理客户投诉，而非客服记录后转交其他部门”）；
- 将 “信息处理” 融入 “原始信息产生的环节”（如 “销售人员录入客户信息时直接完成初步校验，而非后续由数据部门处理”）；
- 视 “地理分散的资源” 为集中资源（如 “通过系统共享，让异地仓库统一参与库存调配”）；
- 链接 “并行活动” 而非整合其结果（如 “订单处理与库存检查并行，而非先完成订单再查库存”）；
- 决策点与执行点合一，将控制嵌入流程（如 “一线员工可直接审批小额订单，无需上报”）；
- 数据 “源头一次采集”，避免重复录入（如 “客户在官网填写信息后，系统自动同步至 CRM、订单系统”）。

### （二）软件再工程（36.5-36.8）

软件再工程是对 “legacy 系统（遗留系统）” 的系统性重构，包含 6 大核心活动，按 “评估 - 文档 - 逆向 - 重构 - 正向” 的逻辑推进：

#### 1. 软件再工程的六大活动

|活动|核心目标与操作|
|---|---|
|1. 库存分析（Inventory Analysis）|评估现有软件资产，筛选再工程候选对象：  <br>① 建立应用清单（含名称、创建年份、变更次数、最近变更时间、接口系统等）；  <br>② 设定评估标准（如 “维护成本高、业务价值大”），优先级排序（如 “将‘订单系统’列为优先再工程对象，因其维护成本占比 40% 且支撑核心业务”）。|
|2. 文档重构（Document Restructuring）|解决遗留系统 “文档缺失 / 过时” 问题，按资源情况选择策略：  <br>① 资源不足：“触摸即文档”（仅在修改模块时更新对应文档）；  <br>② 业务关键系统：全量精简文档（聚焦核心逻辑，避免冗余）；  <br>③ 非关键系统：若功能正常，可暂不文档化。|
|3. 逆向工程（Reverse Engineering）|从 “现有代码 / 数据” 反推 “设计逻辑与模型”（如 “通过 C++ 代码反推类图、通过数据库表结构反推数据模型”），为重构提供依据。|
|4. 代码重构（Code Restructuring）|优化代码结构，不改变功能但提升可维护性：  <br>① 工具分析代码（如用 SonarQube 检测 “冗余代码、未使用变量”）；  <br>② 重构不良设计（如 “拆分过大函数、消除 goto 语句”）；  <br>③ 测试验证（确保重构后功能无异常）；  <br>④ 更新内部文档。|
|5. 数据重构（Data Restructuring）|升级数据架构，适配新需求：  <br>① 逆向工程：分析现有数据结构（如 “扁平文件存储客户信息”）；  <br>② 设计新数据模型（如 “改用关系型数据库，拆分客户表、地址表”）；  <br>③ 数据迁移与验证（确保数据完整性）；  <br>_注：数据重构会影响代码 / 架构，需同步调整。_|
|6. 正向工程（Forward Engineering）|基于重构后的设计 / 数据模型，开发新系统或升级现有系统，实现 “从重构到落地”：  <br>① 采用现代设计理念（如微服务架构）；  <br>② 依托原型提升开发效率（已有系统可参考，避免从零开始）；  <br>③ 结合用户经验明确新需求；  <br>④ 用 CASE 工具自动化部分开发（如代码生成器）；  <br>⑤ 输出完整配置（文档、代码、数据）。|

## 四、再工程的经济性评估（36.9）

再工程需投入资源，需通过 “成本 - 收益分析” 判断是否可行，核心基于 9 个参数构建数学模型。

### （一）核心参数定义

|参数|含义|
|---|---|
|P1|应用当前年度维护成本（如 “现有订单系统每年维护费 50 万元”）|
|P2|应用当前年度运营成本（如 “服务器、人力等运营开销 30 万元 / 年”）|
|P3|应用当前年度业务价值（如 “订单系统每年带来的直接收益 200 万元”）|
|P4|再工程后预测年度维护成本（如 “重构后每年维护费 20 万元”）|
|P5|再工程后预测年度运营成本（如 “重构后运营开销 25 万元 / 年”）|
|P6|再工程后预测年度业务价值（如 “重构后收益提升至 280 万元 / 年”）|
|P7|再工程估算总成本（如 “重构需投入 80 万元”）|
|P8|再工程估算周期（如 “6 个月，即 0.5 年”）|
|P9|再工程风险系数（ nominal=1.0，高风险 = 1.2，低风险 = 0.8）|
|L|系统预期剩余生命周期（如 “5 年”）|

### （二）成本 - 收益计算模型

1. **持续维护的净价值（不进行再工程）**：  
    Cmaint​=[P3−(P1+P2)]×L  
    （含义：生命周期内 “业务价值 - 维护 + 运营成本” 的总净价值）
    
2. **再工程的净价值**：  
    Creeng​=[P6−(P4+P5)]×(L−P8)−(P7×P9)  
    （含义：生命周期内 “再工程后净价值 × 有效时间 - 再工程成本 × 风险系数”）
    
3. **再工程收益**：  
    成本收益
    
    - 若结果为正：再工程可行（收益大于持续维护）；
    - 若结果为负：需重新评估（如降低再工程成本、调整目标）。

### （三）示例计算

假设参数：P1=50 万，P2=30 万，P3=200 万，P4=20 万，P5=25 万，P6=280 万，P7=80 万，P8=0.5 年，P9=1.0，L=5 年：

  

- Cmaint​=[200−(50+30)]×5=600万；
- Creeng​=[280−(20+25)]×(5−0.5)−(80×1.0)=235×4.5−80=977.5万；
- 成本收益 = 977.5-600=377.5 万（正收益，再工程可行）。

## 五、核心总结

维护与再工程是软件 “全生命周期价值最大化” 的关键环节：

  

1. **维护聚焦 “问题应对”**：通过可维护性设计与支持性建设，降低交付后变更成本；
2. **再工程聚焦 “价值升级”**：从业务流程到软件系统的系统性重构，适配新需求、提升效率；
3. **经济性是决策核心**：再工程需通过成本 - 收益模型验证，避免盲目投入。  
    两者结合，确保软件在长期运行中持续满足业务与用户需求，避免 “遗留系统拖累业务发展”