# 第 20 章 评审技术（Review Techniques）

## 20.1 概述（Overview）

### 什么是评审？（What Are Reviews?）

- 由技术人员为技术人员组织的会议；
- 对软件工程过程中生成的工作产品进行的技术评估；
- 一种软件质量保证机制；
- 一个培训平台。

### 错误与缺陷（Errors and Defects）

- **错误（Error）**：软件发布给最终用户前发现的质量问题；
- **缺陷（Defect）**：仅在软件发布给最终用户后才发现的质量问题。

  

_注：本书中对 “错误” 和 “缺陷” 的时间维度区分并非主流观点。_

## 20.2 缺陷放大与消除（Defect Amplification and Removal）

### 缺陷放大模型（Defect Amplification Model）

该模型用于描述缺陷在软件开发各阶段的传递、放大及新增过程，核心要素包括：

  

- 传递的错误（Errors passed through）：从上个开发阶段遗留到当前阶段的错误；
- 放大的错误（Amplified errors 1:x）：当前阶段中，原有错误引发的额外错误（错误数量按比例放大）；
- 新增错误（Newly generated errors）：当前开发阶段新引入的错误；
- 开发阶段（Development step）：软件开发的各个环节（如初步设计、详细设计、编码等）；
- 检测率（Detection Percent Efficiency）：在当前阶段检测出错误的比例；
- 缺陷（Defects）：最终遗留到软件发布后的质量问题。

### 缺陷修复成本差异

假设在**设计阶段**发现并修复一个错误的成本为 1.5 个货币单位，与之相比：

  

- 在**测试开始前**发现同一错误，修复成本为 6.5 个货币单位；
- 在**测试阶段**发现，修复成本为 15 个货币单位；
- 在**软件发布后**发现，修复成本为 67-100 个货币单位。

  

多项研究表明：

  

- 设计活动会引入软件开发过程中 50%-65% 的错误；
- 正式评审技术在发现设计缺陷方面的有效性高达 75%。

### 案例 1：无评审的缺陷放大（Defect Amplification No Reviews）

|开发阶段|关键数据（错误数量 / 检测率）|计算逻辑|
|---|---|---|
|初步设计|初始错误 10 个，检测率 0%|无错误修复，全部传递至下一阶段|
|详细设计|传递错误 10 个、新增错误 27 个，检测率 20%|修复错误 4 个（(10+27)×20%），剩余错误 33 个传递|
|编码 / 单元测试|传递错误 33 个、新增错误 25 个，检测率 20%|修复错误 11.2 个（(33+25)×20%），剩余错误 46.8 个传递（按整数简化计算）|
|集成测试|传递错误 47 个（简化后），检测率 50%|修复错误 23.5 个，剩余错误 23.5 个传递|
|系统测试|传递错误 24 个（简化后），检测率 50%|修复错误 12 个，剩余错误 12 个传递|
|确认测试|无新增错误，检测率 50%|无新增错误，最终遗留缺陷 12 个|

  

**总修复成本计算**：  
Total cost = (10+27×3+25)×20%×6.5 + (94+47+24)×50%×15 + 12×67 = 2177（货币单位）

### 案例 2：有评审的缺陷放大（Defect Amplification With Reviews）

|开发阶段|关键数据（错误数量 / 检测率）|计算逻辑|
|---|---|---|
|初步设计|初始错误 10 个，检测率 70%|修复错误 7 个，剩余 3 个传递至下一阶段|
|详细设计|传递错误 3 个、新增错误 28.5 个，检测率 50%|修复错误 15.75 个（(3+28.5)×50%），剩余 15.75 个传递（简化为 16 个）|
|编码 / 单元测试|传递错误 16 个、新增错误 10 个，检测率 60%|修复错误 15.6 个（(16+10)×60%），剩余 10.4 个传递（简化为 10 个）|
|集成测试|传递错误 10 个、新增错误 25 个，检测率 60%|修复错误 21 个（(10+25)×60%），剩余 14 个传递|
|系统测试|传递错误 14 个（简化后为 12 个），检测率 50%|修复错误 6 个，剩余 6 个传递|
|确认测试|无新增错误，检测率 50%|无新增错误，最终遗留缺陷 3 个|

  

**总修复成本计算**：  
Total cost = (10×70%+28.5×50%)×1.0 + (5+10×3+25)×60%×6.5 + (24+12+6)×50%×15 + 3×67 = 771（货币单位）

  

_结论：引入评审后，缺陷修复总成本从 2177 降至 771，成本降幅显著。_

## 20.3 评审指标及其应用（Review Metrics and Their Use）

### 核心评审指标定义

#### 1. 总评审工作量（Ereview）

指评审过程中投入的总人力工时，计算公式为：  
**Ereview = Ep + Ea + Er**

  

- Ep（Preparation effort）：评审会议前，准备工作产品所需的人力工时；
- Ea（Assessment effort）：评审会议过程中消耗的人力工时；
- Er（Rework effort）：修复评审中发现的错误所需的人力工时。

#### 2. 总错误数量（Errtot）

指评审中发现的所有错误总数，按严重程度分为：  
**Errtot = Errminor + Errmajor**

  

- Errminor（Minor errors found）：次要错误，修复所需工时低于预设阈值；
- Errmajor（Major errors found）：主要错误，修复所需工时高于预设阈值。

#### 3. 缺陷密度（Defect density）

指单位工作量产品中发现的错误数量，用于衡量工作产品质量，计算公式为：  
**Defect density = Errtot / WPS**

  

- WPS（Work product size）：被评审工作产品的规模（如 UML 模型数量、文档页数等）。

### 案例 1：评审成本节省估算（Evaluate Saving: An Example—I）

已知条件：

  

- 评审中发现的**次要模型错误**，修复需 4 人时 / 个；
- 评审中发现的**主要需求错误**，修复需 18 人时 / 个；
- 次要错误出现频率是主要错误的 6 倍；
- 测试阶段发现的**需求相关错误**，修复平均需 45 人时 / 个。

  

计算过程：

  

1. 平均修复 1 个需求错误的评审成本：  
    设主要错误数量为 x，则次要错误数量为 6x，总错误数 7x；  
    平均成本 = (6x×4 + x×18) / 7x = 6 人时 / 个。
2. 每个错误通过评审节省的测试工时：  
    Effort saved per error = Etraining（测试修复成本） - Ereviews（评审修复成本） = 45 - 6 = 30 人时 / 个。
3. 总节省工时：  
    若需求模型评审中发现 22 个错误，总节省工时 = 22×30 = 660 人时（仅针对需求相关错误）。

### 案例 2：工作绩效预测（Prediction Work Performance: An Example—II）

已知条件：

  

- 历史数据显示，需求模型的**平均缺陷密度**为 0.6 个错误 / 页；
- 新需求模型共 32 页。

  

预测结果：  
新需求模型评审中预计发现的错误数量 = 32×0.6 ≈ 19-20 个。  
_若实际仅发现 6 个错误，可能存在两种情况：①需求模型质量极高；②评审方法不够全面。_

### 有无评审的工作量对比

- **时间维度**：引入评审会增加早期开发阶段的工作量，但能大幅减少后续测试和错误修复的工作量，最终软件发布时间早于无评审的情况；
- **成本维度**：评审并非 “消耗时间”，而是通过提前发现错误降低后续高成本修复，本质是 “节省时间与成本”。

  

![](data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%27400%27%20height=%27256%27/%3e)![有无评审的工作量对比图](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjI1NiIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjwvc3ZnPg==)![](data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%27400%27%20height=%27256%27/%3e)![image](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjI1NiIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjwvc3ZnPg==)

  
（图中展示 “无评审（without inspections）” 与 “有评审（with reviews）” 在需求、设计、编码、测试、部署各阶段的工作量变化，有评审的部署时间更早）

## 20.4 参考模型（Reference Model）

评审的正式程度取决于以下 4 个要素，要素越明确，评审正式度越高：

  

1. 明确定义评审人员的角色（Distinct roles for reviewers）；
2. 充分的评审计划与准备工作（Sufficient planning and preparation）；
3. 确定评审的清晰结构（Distinct review structure）；
4. 评审人员对错误修复的后续跟进（Follow-up for corrections）。

  

![](data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%27400%27%20height=%27256%27/%3e)![评审参考模型图](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjI1NiIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjwvc3ZnPg==)![](data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%27400%27%20height=%27256%27/%3e)![image](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjI1NiIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjwvc3ZnPg==)

  
（模型包含：规划与准备（Planning & Preparation）、角色（Roles）、会议（Meeting）、人员（Individuals）、结构（Structure）、评审（Review）、执行（Play）、修正与验证（Correction & Verification））

## 20.5 非正式评审（Informal Reviews）

非正式评审无严格流程与角色划分，常见形式包括：

  

1. **桌面检查（Desk check）**：与同事简单核对软件工程工作产品；
2. **临时会议（Casual meeting）**：2 人以上为评审工作产品召开的非正式会议；
3. **结对编程（Pair programming）**：开发过程中持续进行的评审，在设计或编码时实时发现错误，提升工作产品质量。

## 20.6 正式技术评审（Formal Technical Reviews, FTR）

### 20.6.1 正式技术评审目标（Objectives of FTR）

- 发现软件任何表述形式（如需求模型、设计、代码）中的功能、逻辑或实现错误；
- 验证被评审软件是否满足需求；
- 确保软件符合预设的表述标准；
- 保证软件开发风格的一致性；
- 提升项目可管理性。

  

_注：正式技术评审（FTR）是一个评审类别，包含走查（walkthroughs）和审查（inspections）等具体形式。_

### 20.6.2 评审会议规范（The Review Meeting）

1. **参与人数**：3-5 人（通常）；
2. **会前准备**：每人准备时间不超过 2 小时；
3. **会议时长**：不超过 2 小时；
4. **评审焦点**：特定工作产品（如部分需求模型、详细组件设计、组件源代码）。

### 20.6.3 评审角色（The Players）

正式技术评审需明确划分以下角色，确保流程有序进行：

  

- **评审负责人（Review leader）**：统筹评审流程，协调各方；
- **生产者（Producer）**：工作产品的开发人员；
- **记录员（Recorder）**：记录评审中提出的所有重要问题；
- **评审员（Reviewer）**：参与评审、提出问题的技术人员；
- **标准负责人（Standards bearer, SQA）**：确保软件符合质量标准（来自软件质量保证部门）；
- **维护顾问（Maintenance oracle）**：从维护角度评估工作产品的可维护性。

### 20.6.4 评审流程（Process）

#### 1. 角色职责

- **生产者（Producer）**：确认工作产品完成后，通知项目负责人启动评审；
- **评审负责人（Review leader）**：评估工作产品是否具备评审条件，复制并分发材料给 2-3 名评审员，组织会前准备；
- **评审员（Reviewer）**：投入 1-2 小时审查产品、记录问题、熟悉内容；
- **记录员（Recorder）**：书面记录评审中所有重要问题。

#### 2. 三阶段流程

1. **准备阶段（Preparation phase）**：  
    生产者→评审负责人（提交产品）→评审员（会前准备）→整理问题清单；
2. **执行阶段（Perform phase）**：  
    生产者介绍产品→评审员提出问题→记录员记录问题；
3. **跟踪阶段（Track phase）**：  
    形成评审结论→SQA 部门出具评审报告→跟进错误修复情况。

### 20.6.5 评审指南（Review Guidelines）

1. 评审**产品**，而非评审**生产者**（对事不对人）；
2. 制定议程并严格遵守，避免会议偏离主题；
3. 限制争论与反驳，聚焦问题本身；
4. 明确指出问题领域，但不要求当场解决所有问题；
5. 所有问题需书面记录，便于后续跟踪；
6. 控制参与人数，且要求所有人提前准备；
7. 为每种待评审产品制定专属检查清单（Checklist）；
8. 为正式技术评审分配资源并安排时间；
9. 为所有评审员提供有意义的培训；
10. 对早期评审过程进行复盘优化。

### 20.6.6 抽样驱动评审（Sample-Driven Reviews, SDRs）

抽样驱动评审通过量化分析，确定需优先进行完整正式技术评审（FTR）的工作产品，核心流程为：

  

1. **抽样检查**：对每个工作产品 i，抽取比例为 ai 的样本进行检查，记录样本中发现的错误数量 fi；
2. **错误估算**：估算工作产品 i 的总错误数量 = fi × (1/ai)（按抽样比例放大）；
3. **排序优先级**：按总错误数量估算值从高到低排序工作产品；
4. **资源聚焦**：将评审资源集中用于错误数量估算最高的工作产品，提升评审效率。