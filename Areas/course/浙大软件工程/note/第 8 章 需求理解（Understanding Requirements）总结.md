# 第 8 章 需求理解（Understanding Requirements）总结

本章围绕 “需求工程” 全流程展开，从需求的启动、获取、细化，到协商、规格说明、验证与管理，系统梳理了需求理解的核心方法、工具与关键环节，同时结合实例（如 SafeHome 系统）说明理论落地方式，具体内容如下：

## 一、需求工程的核心流程

需求工程是贯穿软件项目前期的系统性工作，包含 6 个关键阶段，形成 “从需求产生到验证落地” 的完整闭环：

  

| 阶段                         | 核心目标                                       | 关键输出 / 动作                                                                                                                                                                                |
| -------------------------- | ------------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **1. 启动（Inception）**       | 建立对问题、利益相关者、期望解决方案的基础认知，验证客户与开发者的初步沟通协作有效性 | - 识别利益相关者（通过 “还应和谁沟通” 等问题扩展范围）  <br>- 提出无上下文问题（如 “需求发起方是谁？”“用户是谁？”“解决方案的经济收益？”“是否有其他解决方案来源？”）  <br>- 协调多方视角，推动协作                                                                         |
| **2. 获取（Elicitation）**     | 从所有利益相关者处收集需求，明确问题边界与初步解决方案                | - 组织多方会议（开发者 + 客户），明确准备规则、议程，由 “协调者” 把控节奏  <br>- 使用定义机制（工作表、白板、电子论坛等）记录需求  <br>- 核心目标：识别问题、提出解决方案要素、协商方案、明确初步需求  <br>- 需解决三大问题：**范围模糊**（需求边界不清）、**理解偏差**（各方对需求认知不一致）、**需求易变**（需求随项目推进变动） |
| **3. 细化（Elaboration）**     | 创建分析模型，从数据、功能、行为三个维度明确需求细节                 | - 构建场景化、类、行为、流程导向的分析模型（详见下文 “分析模型构建”）  <br>- 补充需求优先级与质量属性要求                                                                                                                              |
| **4. 协商（Negotiation）**     | 达成开发者与客户均认可的、现实可行的需求交付范围                   | - 识别关键利益相关者，明确各方 “胜利条件”（可能隐含）  <br>- 推动 “双赢” 需求方案，避免因需求分歧导致项目风险                                                                                                                          |
| **5. 规格说明（Specification）** | 以规范形式固化需求，确保可追溯、可理解                        | - 形式灵活，包括：书面文档、模型集合、形式化数学描述、用例集、原型  <br>- 核心是清晰传递需求，无歧义                                                                                                                                  |
| **6. 验证（Validation）**      | 审查需求的正确性、完整性、一致性，排除无效或不可行需求                | - 验证维度：需求与整体目标一致性、抽象层级合理性（避免过早引入技术细节）、必要性（是否为核心需求）、边界清晰度、无歧义性、归因明确性（每个需求有明确来源）、无冲突性、技术可行性、可测试性  <br>- 同时验证分析模型是否反映系统的信息、功能与行为，模型拆分是否合理，需求模式是否有效                                          |
| **7. 需求管理（补充阶段）**          | 监控需求在项目中的执行与变更，尤其适用于增量开发                   | - 核心手段：分布式调试（定位需求相关错误）、运行时验证（软件是否匹配需求规格）、运行时确认（演化软件是否满足用户目标）、业务活动监控（系统是否符合业务目标）、演化与协同设计（向利益相关者同步需求演化信息）                                                                                  |

## 二、需求获取的关键方法与工具

### 1. 质量功能部署（QFD）：量化需求优先级

通过四步分析明确需求价值与优先级，确保需求对齐客户感知：

  

- **功能部署**：评估每个系统功能对客户的 “价值”；
- **信息部署**：识别需求相关的数据对象与事件；
- **任务部署**：分析系统需支持的用户行为；
- **价值分析**：将需求分为三类，明确优先级：
    - 常规需求（客户明确提出的基础需求）；
    - 期望需求（客户默认存在但未明确说明的需求，如系统稳定性）；
    - 惊喜需求（超出客户预期的创新需求，提升产品竞争力）。

### 2. 非功能需求（NFR）分析：保障系统质量属性

非功能需求（如性能、安全性、可靠性）需通过两步验证兼容性：

  

1. 构建矩阵：以非功能需求为列、软件工程指南为行；
2. 优先级分类：按 “互补（需求与指南协同）、重叠（部分重合）、冲突（相互制约）、独立（无关联）” 分类，确定需优先实现的非功能需求。

### 3. 需求获取的产出物（Elicitation Work Products）

需形成标准化文档，确保需求可追溯：

  

- 需求与可行性说明、系统 / 产品的范围界定；
- 参与需求获取的客户、用户及利益相关者列表；
- 系统技术环境描述；
- 按功能组织的需求列表及适用的领域约束；
- 不同操作场景下的使用场景（用例）；
- 为明确需求开发的原型。

## 三、用例（Use-Cases）：场景化描述需求

用例是从用户视角描述系统使用场景的核心工具，通过 “角色 - 场景” 匹配明确需求细节：

### 1. 用例的核心要素

- **角色（Actor）**：与系统交互的人或设备（如用户、外部传感器）；
- **场景**：每个用例对应一组用户场景，需回答以下问题：
    - 主要角色与次要角色是谁？
    - 角色的目标是什么？
    - 场景启动前的前置条件是什么？
    - 角色需执行的核心任务 / 功能？
    - 场景的扩展场景（异常流程）有哪些？
    - 角色交互的变化可能性？
    - 角色需获取 / 生成 / 修改的系统信息？
    - 角色是否需向系统告知外部环境变化？
    - 角色希望从系统获取什么信息？
    - 角色是否需被通知意外变化？

### 2. 用例图：可视化需求关系

以 SafeHome 家庭安防系统为例，用例图包含：


- **角色**：房主（Homeowner）、系统管理员（System Administrator）、传感器（sensors，外部设备角色）；
- **用例**：武装 / 解除系统（Arms/disarms system）、通过互联网访问系统（Accesses System Via internet）、响应报警事件（Responds to Alarm event）、处理错误情况（Encounters An error condition）、重新配置传感器及系统功能（Reconfigures Sensors and Related system features）；
- 核心作用：直观展示角色与系统功能的交互关系，明确需求覆盖范围。

## 四、分析模型的构建：细化需求细节

分析模型是需求的 “可视化表达”，包含四类核心元素，从不同维度刻画需求：

  

| 模型类型       | 核心元素                  | 作用（以 SafeHome 系统为例）                                                                                                                                                                               |
| ---------- | --------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **场景导向元素** | 用例、用例图、活动序列           | 描述用户与系统的交互流程，如 “房主武装系统” 的步骤                                                                                                                                                                       |
| **类导向元素**  | 类图（包含类的属性与方法）         | 刻画系统中的核心数据实体，如 “Sensor（传感器）” 类：  <br>- 属性：name/id（名称 / ID）、type（类型）、location（位置）、area（监控区域）、characteristics（特性）  <br>- 方法：identify ()（识别）、enable ()（启用）、disable ()（禁用）、reconfigure_()（重新配置）       |
| **行为导向元素** | 状态图（包含状态名称、状态变量、状态活动） | 描述系统或对象的状态变化，如复印机的状态图：  <br>- 状态：初始化（Initialization）、就绪（Ready）、复印中（Making copies）、缺纸（load paper）、卡纸（Jammed）  <br>- 每个状态包含：状态变量（如 system status=“Ready”）、活动（如 do: poll user input panel（轮询用户输入面板）） |
| **流程导向元素** | 数据流图（DFD）             | 展示系统中数据的流转过程，明确数据的输入、处理、存储与输出，如 SafeHome 系统中 “传感器数据→系统处理→报警信息输出” 的流程                                                                                                                              |

## 五、分析模式（Analysis Patterns）：复用需求经验

分析模式是对 “重复出现的需求场景” 的标准化解决方案，包含 9 个核心组成部分，便于团队复用与沟通：

  

1. **模式名称**：概括模式本质；
2. **意图**：说明模式的目标与作用；
3. **动机**：通过场景说明模式如何解决问题；
4. **约束与上下文**：描述影响模式使用的外部因素及模式能解决的外部问题；
5. **解决方案**：阐述模式的结构与行为设计；
6. **结果**：说明模式应用后的效果与 trade-off（权衡）；
7. **设计**：讨论如何通过设计模式实现该分析模式；
8. **已知应用**：实际系统中的应用案例；
9. **相关模式**：关联模式（如常用搭配、结构相似、变体模式）。