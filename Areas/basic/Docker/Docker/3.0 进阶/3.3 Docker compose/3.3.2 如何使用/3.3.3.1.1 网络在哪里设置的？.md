

我们来深入解释。

---

## ✅ 默认情况下，Docker Compose 会自动创建一个网络

如果你没有显式指定 `networks:`，Compose 会：

-   创建一个名为 `<项目名>_default` 的 **bridge 网络**；
    
-   所有服务默认会连接到这个网络；
    
-   服务之间可以通过服务名（如 `mongodb`, `backend`）互相访问（通过内部 DNS 解析）；
    

---

### 🧩 你的 Compose 文件虽然没有写 `networks:`，但**等价于写了如下内容**：

```yaml
services:
  frontend:
    networks:
      - default
  backend:
    networks:
      - default
  nginx:
    networks:
      - default
  mongodb:
    networks:
      - default

networks:
  default:
    driver: bridge
```

---

## 🔍 示例说明：

| 服务 | 网络连接 | 可访问的主机名 |
| --- | --- | --- |
| `backend` | 自动连接到 `default` 网络 | 可通过 `mongodb:27017` 访问数据库 |
| `frontend` | 自动连接 | 可通过 `/api` 访问 `nginx` 代理到 `backend:3001` |
| `nginx` | 自动连接 | 能访问 `frontend:3000`, `backend:3001` |
| `mongodb` | 自动连接 | 被 `backend` 通过服务名访问 |

---

## ✅ 网络默认是 `bridge` 类型

`bridge` 是 Docker Compose 默认使用的网络驱动，特点是：

-   容器间可通信（通过服务名解析）
    
-   容器对宿主机暴露端口（通过 `ports` 映射）
    
-   宿主机无法通过服务名访问容器（只能通过 localhost + 端口）
    

---

## 🚀 如果你想自定义网络，可以这么写：

```yaml
services:
  frontend:
    networks:
      - app-net

  backend:
    networks:
      - app-net

networks:
  app-net:
    driver: bridge
```

也可以使用 `external: true` 连接已有网络，比如连接到 `host` 网络、或跨多个 Compose 项目复用网络。

---