## 一、核心字段详细解释

### `"Name": "bridge"`

-   **含义**：Docker 默认创建的网络名称。
    
-   **说明**：每当 Docker 启动，会自动创建一个名为 `bridge` 的默认网络，供容器使用。
    

---

### `"Id": "860670fdf6..."`

-   **含义**：网络的唯一 ID。
    
-   **说明**：Docker 内部用此 ID 唯一标识网络，操作网络时可以用名称或 ID。
    

---

### `"Created": "2025-07-25T03:01:40.467..."`

-   **含义**：网络创建时间。
    
-   **作用**：用于日志追踪和调试。
    

---

### `"Scope": "local"`

-   **含义**：网络作用范围。
    
-   **`local`** 表示此网络仅在当前宿主机可用。
    
-   **扩展**：
    
    -   `global`：用于 Swarm 模式的 Overlay 网络，多个主机共享。
        
    -   `swarm`：Swarm 管理的网络。
        

---

### `"Driver": "bridge"`

-   **含义**：此网络使用的是 `bridge` 驱动。
    
-   **说明**：
    
    -   `bridge` 是 Docker 最常用的驱动，基于 Linux 的虚拟网桥技术。
        
    -   它创建一个 Linux 网桥设备（如 `docker0`），容器通过虚拟网卡 veth pair 连接到此网桥。
        

---

### `"EnableIPv6": false`

-   **含义**：是否启用 IPv6。
    
-   **当前为 false**，表示只支持 IPv4。
    

---

### `"IPAM": {...}`

> **IPAM（IP Address Management）**：用于管理子网、网关等 IP 地址配置。

#### \- `"Driver": "default"`

-   使用默认 IP 分配策略。
    

#### \- `"Config": [...]`

```json
{
    "Subnet": "172.17.0.0/16",
    "Gateway": "172.17.0.1"
}
```

-   子网：`172.17.0.0/16`
    
-   网关：`172.17.0.1`（也是 `docker0` 的 IP）
    
-   Docker 会自动为容器分配 `172.17.0.0/16` 范围内的地址。
    

---

### `"Internal": false`

-   **含义**：此网络是否为 **内部网络**。
    
-   **false** 表示容器可以访问外部网络。
    
-   **如果为 true**，则容器只能与网络内通信，无法访问外部互联网。
    

	---

### `"Attachable": false`

-   **含义**：是否允许容器通过 `docker network connect` 命令动态加入该网络。
    
-   默认 bridge 网络不支持 attachable。
    
-   通常在用户自定义网络中可设为 true。
    

---

### `"Ingress": false`

-   **含义**：是否是用于 Swarm 的 ingress 网络（负载均衡入口）。
    
-   默认 bridge 网络不做负载均衡。
    

---

### `"ConfigFrom": { "Network": "" }`

-   **说明**：该字段用于创建“配置继承型网络”，如 `ConfigOnly` 网络。
    
-   默认 bridge 网络未继承其他配置网络。
    

---

### `"ConfigOnly": false`

-   **说明**：是否为仅配置的网络，用于定义网络配置模板，不允许直接连接容器。
    

---

### `"Containers": {}`

-   当前没有容器连接此网络时，此字段为空。
    
-   若有容器连接，会列出容器的 IP、MAC、名称、连接点等信息。
    

---

### `"Options": {...}`

这个字段非常关键，是 bridge 网络的各种底层行为配置：

| 配置键 | 含义 |
| --- | --- |
| `"com.docker.network.bridge.default_bridge": "true"` | 标识这是默认桥接网络 |
| `"com.docker.network.bridge.enable_icc": "true"` | 是否启用容器间通信（**ICC = Inter-Container Communication**） |
| `"com.docker.network.bridge.enable_ip_masquerade": "true"` | 启用 IP 伪装（NAT）以访问外部网络 |
| `"com.docker.network.bridge.host_binding_ipv4": "0.0.0.0"` | 指定主机绑定的 IP（一般用于端口转发） |
| `"com.docker.network.bridge.name": "docker0"` | 映射到宿主机上的桥接接口名（使用 `ip link` 可查看） |
| `"com.docker.network.driver.mtu": "1500"` | 网络的最大传输单元（MTU） |

---

### `"Labels": {}`

-   用户自定义的键值对元数据（无配置则为空）。
    
-   可用于网络分类、调度策略等。
    

---

## 二、实现原理（桥接网络）

-   Docker 启动时，会在宿主机创建：
    
    -   一个虚拟网桥：`docker0`（相当于一个交换机）
        
    -   每个容器创建一对 `veth` 虚拟网卡：
        
        -   一端连接容器内部（`eth0`）
            
        -   一端连接 `docker0`
            
-   Docker 使用 `iptables` 设置 NAT 和端口映射规则：
    
    -   允许容器访问外网（通过 SNAT）
        
    -   支持外部端口访问容器（通过 DNAT）
        

```text
[container] -- veth -- [docker0] -- eth0 -- [Internet]
```

---

## 三、常见使用场景

| 场景 | 描述 |
| --- | --- |
| 本地开发 | 容器间自动组网，无需手动配置 |
| 容器访问外网 | 默认启用 NAT 和 IP masquerading |
| 基础学习 | 初学者可用 `docker run` 体验网络通信 |
| 网络隔离 | 可基于此创建自定义隔离网络 |

---

## 四、扩展知识点

### ✅ 自定义网络（更推荐）

相比默认的 `bridge` 网络，推荐使用：

```bash
docker network create --driver bridge my-net
```

优势：

-   容器可通过容器名直接通信（DNS 支持）
    
-   可设置 `attachable: true`
    
-   可配置 IPv6、子网段等高级参数
    

---

### ✅ 查看 docker0 接口

```bash
ip addr show docker0
```

或

```bash
brctl show docker0
```

---

### ✅ 常见故障排查

-   **容器无法访问外网**：检查是否禁用了 `IP Masquerade` 或宿主机防火墙规则（iptables）
    
-   **容器间不能通信**：是否启用了 `"enable_icc": false`
    
-   **端口无法访问**：宿主机是否绑定了 `0.0.0.0`，以及 `EXPOSE` 和 `-p` 映射是否正确
    
