

æˆ‘ä»¬æ¥æ·±å…¥è§£é‡Šã€‚

---

## âœ… é»˜è®¤æƒ…å†µä¸‹ï¼ŒDocker Compose ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªç½‘ç»œ

å¦‚æœä½ æ²¡æœ‰æ˜¾å¼æŒ‡å®š `networks:`ï¼ŒCompose ä¼šï¼š

-   åˆ›å»ºä¸€ä¸ªåä¸º `<é¡¹ç›®å>_default` çš„ **bridge ç½‘ç»œ**ï¼›
    
-   æ‰€æœ‰æœåŠ¡é»˜è®¤ä¼šè¿æ¥åˆ°è¿™ä¸ªç½‘ç»œï¼›
    
-   æœåŠ¡ä¹‹é—´å¯ä»¥é€šè¿‡æœåŠ¡åï¼ˆå¦‚ `mongodb`, `backend`ï¼‰äº’ç›¸è®¿é—®ï¼ˆé€šè¿‡å†…éƒ¨ DNS è§£æï¼‰ï¼›
    

---

### ğŸ§© ä½ çš„ Compose æ–‡ä»¶è™½ç„¶æ²¡æœ‰å†™ `networks:`ï¼Œä½†**ç­‰ä»·äºå†™äº†å¦‚ä¸‹å†…å®¹**ï¼š

```yaml
services:
  frontend:
    networks:
      - default
  backend:
    networks:
      - default
  nginx:
    networks:
      - default
  mongodb:
    networks:
      - default

networks:
  default:
    driver: bridge
```

---

## ğŸ” ç¤ºä¾‹è¯´æ˜ï¼š

| æœåŠ¡ | ç½‘ç»œè¿æ¥ | å¯è®¿é—®çš„ä¸»æœºå |
| --- | --- | --- |
| `backend` | è‡ªåŠ¨è¿æ¥åˆ° `default` ç½‘ç»œ | å¯é€šè¿‡ `mongodb:27017` è®¿é—®æ•°æ®åº“ |
| `frontend` | è‡ªåŠ¨è¿æ¥ | å¯é€šè¿‡ `/api` è®¿é—® `nginx` ä»£ç†åˆ° `backend:3001` |
| `nginx` | è‡ªåŠ¨è¿æ¥ | èƒ½è®¿é—® `frontend:3000`, `backend:3001` |
| `mongodb` | è‡ªåŠ¨è¿æ¥ | è¢« `backend` é€šè¿‡æœåŠ¡åè®¿é—® |

---

## âœ… ç½‘ç»œé»˜è®¤æ˜¯ `bridge` ç±»å‹

`bridge` æ˜¯ Docker Compose é»˜è®¤ä½¿ç”¨çš„ç½‘ç»œé©±åŠ¨ï¼Œç‰¹ç‚¹æ˜¯ï¼š

-   å®¹å™¨é—´å¯é€šä¿¡ï¼ˆé€šè¿‡æœåŠ¡åè§£æï¼‰
    
-   å®¹å™¨å¯¹å®¿ä¸»æœºæš´éœ²ç«¯å£ï¼ˆé€šè¿‡ `ports` æ˜ å°„ï¼‰
    
-   å®¿ä¸»æœºæ— æ³•é€šè¿‡æœåŠ¡åè®¿é—®å®¹å™¨ï¼ˆåªèƒ½é€šè¿‡ localhost + ç«¯å£ï¼‰
    

---

## ğŸš€ å¦‚æœä½ æƒ³è‡ªå®šä¹‰ç½‘ç»œï¼Œå¯ä»¥è¿™ä¹ˆå†™ï¼š

```yaml
services:
  frontend:
    networks:
      - app-net

  backend:
    networks:
      - app-net

networks:
  app-net:
    driver: bridge
```

ä¹Ÿå¯ä»¥ä½¿ç”¨ `external: true` è¿æ¥å·²æœ‰ç½‘ç»œï¼Œæ¯”å¦‚è¿æ¥åˆ° `host` ç½‘ç»œã€æˆ–è·¨å¤šä¸ª Compose é¡¹ç›®å¤ç”¨ç½‘ç»œã€‚

---