---
tags:
  - fleeting
---
## 1. 核心观点  
### Ⅰ. 概念层

“负载均衡”这个术语**并不等价于“让所有节点负载一样”**，这是一个常见但危险的误解。  
真正的定义应当是：

- **负载均衡是以系统整体目标为导向的任务分配机制**
    
- 负载只是众多决策因子中的一个，而非唯一目标

因此，负载均衡更准确地说是一个**多目标优化问题**，而不是简单的“平均分配”。
### Ⅱ. 应用层




### Ⅲ. 实现层

### **IV**.原理层


## 2. 背景/出处  
- 来源：
- 引文/摘要：  
  - …  
  - …  

## 3. 展开说明  
### 题目
这就是今天的全部内容，留一道思考题给你吧，假设你来设计一个日活跃用户1000万的论坛的负载均衡集群，你的方案是什么？设计理由是什么？

### 解答
#### 1、容量评估

**DAU → PV → QPS → 峰值 QPS** 才是正确链路
1️⃣ DAU → 日 PV
假设：人均 100 PV / 天
**日 PV = 10⁹**
#### 2️⃣ 日 PV → 平均 QPS 加上放大系数为10
10⁹/24×3600×10≈**12 万 QPS**
3️⃣ 平均 QPS → 峰值 QPS
工程上通常取：
- 峰值 = 平均 × 2 ~ 5
- 你用 **3 倍**，非常合理
👉 **≈ 36 万 QPS**
#### 4️⃣ QPS ≠ 并发连接数（但数量级一致）
- Web 服务里：
    并发≈QPS×RT并发 ≈ QPS × RT并发≈QPS×RT
- 如果 RT = 50ms：

36,0000×0.05=1,80036,000 \times 0.05 = 1,80036,000×0.05=1,8000

#### 2、容量规划
考虑高可用、异地多活，QPS*2=72万QPS。  
考虑未来半年增长，QPS*1.5=108万QPS。
- 这里乘以 2只是 **规划容量** 的概念，用于：
    - 采购服务器和网络带宽
    - 高可用设计冗余预留
    - 宕机切换时不会超载
换句话说，这是 **设计视角的 QPS**，不是实时流量 QPS。
#### 3、最后，方案设计。  
三级导流。  

Ngxin 的性能是万级，一般的 Linux 服务器上装一个 Nginx 大概能到 5 万 / 秒；LVS 的性能是十万级，据说可达到 80 万 / 秒；而 F5 性能是百万级，从 200 万 / 秒到 800 万 / 秒都有

目前QPS108万

第一级，DNS，确定机房，以目前量级，可以考虑。  
第二级，确定集群，扩展优先，则选Haproxy/LVS，稳定优先则选F5。  
第三级，Nginx+KeepAlived，确定实例。
## 4. 与其他卡片的关联  
- 前置卡片：
- 后续卡片：
- 相似主题：

## 5. 应用/启发  
- 可以如何应用在工作、学习、生活中  
- 引发的思考与问题  

## 6. 待办/进一步探索  
- [ ] 深入阅读 xxx  
- [ ] 验证这个观点的边界条件  
