---
tags:
  - permanent
---
## 1. 核心观点  

规模带来复杂度的主要原因就是“量变引起质变”，当数量超过一定的阈值后，复杂度会发生质的变化。

## 2. 背景/出处  

## 3. 展开说明  

### 背景 

很多企业级的系统，既没有高性能要求，也没有双中心高可用要求，也不需要什么扩展性，但往往我们一说到这样的系统，很多人都会脱口而出：这个系统好复杂！为什么这样说呢？关键就在于这样的系统往往**功能特别多，逻辑分支特别多**。特别是有的系统，**发展时间比较长**，不断地往上面叠加功能，后来的人由于**不熟悉整个发展历史，可能连很多功能的应用场景都不清楚，或者细节根本无法掌握**，**面对的就是一个黑盒系统**，看不懂、改不动、不敢改、修不了，复杂度自然就感觉很高了。

### 特点
#### 1.功能越来越多，导致系统复杂度指数级上升

我以一个简单的抽象模型来计算一下，假设系统间的功能都是两两相关的，

系统的复杂度=功能数量+功能之间的连接数量，通过计算我们可以看出：

3个功能的系统复杂度= 3 + 3 
68个功能的系统复杂度= 8 + 28 = 36

可以看出，具备8个功能的系统的复杂度不是比具备3个功能的系统的复杂度多5，而是多了30，基本是指数级增长的，**主要原因在于随着系统功能数量增多，功能之间的连接呈指数级增长**。下图形象地展示了功能数量的增多带来了复杂度。
![](asserts/Pasted%20image%2020251118095849.png)
#### 2.数据越来越多，系统复杂度发生质变

与功能类似，系统数据越来越多时，也会由量变带来质变，最近几年火热的“大数据”就是在这种背景下诞生的。大数据单独成为了一个热门的技术领域，主要原因就是数据太多以后，**传统的数据收集、加工、存储、分析的手段和工具已经无法适应**，必须应用新的技术才能解决。目前的大数据理论基础是Google发表的三篇大数据相关论文，其中Google File System是大数据文件存储的技术理论，Google Bigtable是列式数据存储的技术理论，Google MapReduce是大数据运算的技术理论，这三篇技术论文各自开创了一个新的技术领域。

即使我们的数据没有达到大数据规模，数据的增长也可能给系统带来复杂性。最典型的例子莫过于使用关系数据库存储数据，我以MySQL为例，**MySQL单表的数据因不同的业务和应用场景会有不同的最优值，但不管怎样都肯定是有一定的限度的，一般推荐在5000万行左右**。如果因为业务的发展，单表数据达到了10亿行，就会产生很多问题，例如：

添加索引会很慢，可能需要几个小时，这几个小时内数据库表是无法插入数据的，相当于业务停机了。
修改表结构和添加索引存在类似的问题，耗时可能会很长。
即使有索引，索引的性能也可能会很低，因为数据量太大。数据库备份耗时很长。

因此，当MySQL单表数据量太大时，我们必须考虑将单表拆分为多表，这个拆分过程也会引入更多复杂性，例如：

拆表的规则是什么？以用户表为例：是按照用户id拆分表，还是按照用户注册时间拆表？

拆完表后查询如何处理？以用户表为例：假设按照用户id拆表，当业务需要查询学历为“本科”以上的用户时，要去很多表查询才能得到最终结果，怎么保证性能？还有很多类似的问题这里不一一展开，后面的专栏还会讨论。





## 4. 与其他卡片的关联  
- 前置卡片：
	- [架构设计-复杂度来源：高可用、高性能、低成本、安全、规模-基本概念](架构设计-复杂度来源：高可用、高性能、低成本、安全、规模-基本概念.md)
- 后续卡片：
	- 
- 相似主题：

## 5. 应用/启发  
- 可以如何应用在工作、学习、生活中  
- 引发的思考与问题  
## 6. 待办/进一步探索  
 
  
