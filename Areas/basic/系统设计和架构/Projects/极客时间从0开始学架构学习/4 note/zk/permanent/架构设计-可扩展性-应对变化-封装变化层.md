---
tags:
  - permanent
---
## 1. 核心观点  


剥离变化层与稳定层（Separation of Volatile & Stable Layers）是一种以**业务变化频率为中心**的架构原则。核心目标是在系统设计中区分：

- **稳定层（Stable Layer）**：长期不变或变化极慢的核心能力、规则、流程。
    
- **变化层（Volatile Layer）**：随着业务需求、外部环境、接入方式快速变化的模块。
    

通过将两者独立组织，使变化不会促发核心代码频繁修改，降低耦合、提高可维护性。

## 2. 背景/出处  

## 3. 展开说明  
### 原理

1. **业务变化点分析**  
    对系统的可能变化进行评估，识别哪些模块未来更新频率高、需求不确定性大。
    
2. **稳定能力抽取**  
    将长期不变且复用价值高的能力归纳入稳定层，例如核心业务逻辑、统一协议规则、领域模型。
    
3. **变化点隔离**  
    将容易改变、接入多样的部分拆到独立层，例如多语言、多数据库、多入口协议、多支付渠道。
    
4. **层间通信通过接口/协议边界**  
    稳定层与变化层通过一组清晰边界通信，可是接口、抽象协议、配置、事件机制等。
    
5. **新增变化无需修改稳定层**  
    变化层独立扩展，核心保持稳定，达成“开放扩展、封闭修改”的目标。

### **将“变化”封装在一个“变化层”，将不变的部分封装在一个独立的“稳定层”**

例如，如果系统需要支持XML、JSON、ProtocolBuffer三种接入方式，那么最终的架构就是上面图中的“形式1”架构，也就是下面这样。
![](asserts/Pasted%20image%2020251115091932.png)

如果系统需要支持MySQL、Oracle、DB2数据库存储，那么最终的架构就变成了“形式2”的架构了，你可以看下面这张图。
![](asserts/Pasted%20image%2020251115091948.png)



无论采取哪种形式，通过剥离变化层和稳定层的方式应对变化，都会带来两个主要的复杂性相关的问题。
### 步骤
### 1.系统需要拆分出变化层和稳定层

对于哪些属于变化层，哪些属于稳定层，很多时候并不是像前面的示例（不同接口协议或者不同数据库）那样明确，不同的人有不同的理解，导致架构设计评审的时候可能吵翻天。

#### 2.需要设计变化层和稳定层之间的接口

接口设计同样至关重要，对于稳定层来说，接口肯定是越稳定越好；**但对于变化层来说，在有差异的多个实现方式中找出共同点，并且还要保证当加入新的功能时原有的接口设计不需要太大修改，这是一件很复杂的事情**。例如，MySQL的REPLACE INTO和Oracle的MERGE INTO语法和功能有一些差异，那存储层如何向稳定层提供数据访问接口呢？是采取MySQL的方式，还是采取Oracle的方式，还是自适应判断？如果再考虑DB2的情况呢？相信你看到这里就已经能够大致体会到接口设计的复杂性了。




## 4. 与其他卡片的关联  
- 前置卡片：
	- [架构设计-可扩展性-基本概念](架构设计-可扩展性-基本概念.md)
- 后续卡片：

- 相似主题：

## 5. 应用/启发  
- 可以如何应用在工作、学习、生活中  
- 引发的思考与问题  

## 6. 待办/进一步探索  
 
  
