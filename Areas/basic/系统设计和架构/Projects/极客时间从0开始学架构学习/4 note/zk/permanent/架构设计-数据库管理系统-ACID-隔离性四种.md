---
tags:
  - permanent
---
## 1. 核心观点  


## 2. 背景/出处  



## 3. 展开说明  

### 读未提交（Read Uncommitted）

**定义**  
允许一个事务读取到其他事务尚未提交的数据，是隔离级别中最弱的一种。

**作用**  
最大化并发性，最小化锁和等待。

**原理**  
基本不做隔离控制，读操作不阻塞写操作，也不被写操作阻塞；可能直接读取到内存中尚未提交的修改版本。

**可能问题**
- 脏读（Dirty Read）
- 不可重复读
- 幻读

**使用场景**  
几乎不用于核心业务系统，更多存在于理论讨论或对一致性完全不敏感的统计类场景。

**扩展知识点**  
多数主流数据库（如 MySQL InnoDB）实际上并不真正支持该级别，即使设置了也会退化为 Read Committed。

### 读提交（Read Committed）

**定义**  
一个事务只能读取到其他事务已经提交的数据。

**作用**  
避免脏读，在一致性和并发性之间取得基本平衡。

**原理**  
通常基于 **MVCC（多版本并发控制）**：

- 每次 `SELECT` 都生成一个新的 Read View
- 只能看到已提交事务的版本
    

**可能问题**

- 不可重复读
- 幻读（标准定义下仍可能）
    

**使用场景**  
OLTP 系统常用级别，Oracle、PostgreSQL 的默认隔离级别。

**扩展知识点**  
Read Committed 的“每次读都重新对齐世界状态”，是其出现不可重复读的根本原因。

### 可重复读（Repeatable Read）

**定义**  
在同一事务中，多次读取同一行数据，结果始终一致。

**作用**  
进一步提升事务内的一致性，防止不可重复读。

**原理**

- 事务开始时创建一次 Read View
- 后续所有普通读都基于同一个视图
- InnoDB 通过 **MVCC + Next-Key Lock** 抑制幻读

**可能问题**
- 理论上存在幻读（MySQL InnoDB 通过实现细节避免）
- #### Next-Key Lock
- **行锁（Record Lock） + 间隙锁（Gap Lock）**
	- 不仅锁住已存在的行
	- 还锁住**可能插入新行的区间**
	- 阻止其他事务在该范围内插入新记录
	- 从结果上看：**幻读被避免**
	- **T2 无法在该谓词范围内完成插入** 18-19 不能插入18

**使用场景**  
MySQL InnoDB 默认隔离级别，适合强调一致性的业务逻辑。

**扩展知识点**  
“可重复”指的是**读一致性**，而不是阻止其他事务修改数据；一致性来自版本，而非锁。

### 串行化（Serializable）

**定义**  
所有事务在效果上等价于串行执行。

**作用**  
提供最强一致性保证。

**原理**

- 强制加锁（范围锁 / 表锁）
- 或通过 Serializable Snapshot Isolation 模拟串行调度
- 严格限制并发冲突

**可能问题**
- 并发性能极低
- 死锁和等待显著增加
    

**使用场景**  
金融清算、强一致性校验、小规模高价值事务。

**扩展知识点**  
Serializable 是唯一能从理论上完全避免所有并发现象的隔离级别，但代价最高。

---

### 总结

四种隔离级别本质是在 **一致性（Correctness）** 与 **并发性（Performance）** 之间的权衡阶梯：

- Read Uncommitted：极端性能，几乎无一致性
    
- Read Committed：防脏读，现实系统常用
    
- Repeatable Read：事务内一致性，MVCC 的典型形态
    
- Serializable：理论最强，工程代价最大
    

---

### 学习方法论

1. **从异常入手**：围绕脏读、不可重复读、幻读反推隔离级别需求
    
2. **结合实现**：重点理解 MVCC、Read View、锁模型
    
3. **对照数据库**：比较 MySQL / PostgreSQL / Oracle 的默认选择与差异
    
4. **事务可视化**：用时间线画事务交错，比记定义更有效
    

---

### 习题（建议动手）

1. 用两个事务复现实验：脏读、不可重复读、幻读
    
2. 比较 MySQL 在 RC 与 RR 下 `SELECT ... FOR UPDATE` 的行为差异
    
3. 思考：为什么 MVCC 只能解决“读一致性”，却解决不了所有写冲突？
    

---

### 高价值、需重点关注的底层知识

- **MVCC 设计思想与版本可见性规则**
    
- **Read View 的生成时机与作用范围**
    
- **锁与版本并存的工程折中（如 InnoDB）**
    
- **SQL 标准 vs 数据库实现差异**
    

这些内容决定了你能否从“会用事务”走向“理解事务系统本身”。

## 4. 与其他卡片的关联  
- 前置卡片：

- 后续卡片：
	- 
- 相似主题：

## 5. 应用/启发  
- 可以如何应用在工作、学习、生活中  
- 引发的思考与问题  

## 6. 待办/进一步探索  
- [ ] 深入阅读 xxx  
- [ ] 验证这个观点的边界条件  
