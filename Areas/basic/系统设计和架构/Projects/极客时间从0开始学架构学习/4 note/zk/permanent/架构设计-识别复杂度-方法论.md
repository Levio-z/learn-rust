---
tags:
  - permanent
---
## 1. 核心观点  

[[# 架构设计的本质目的是为了解决软件系统的复杂性]]，所以在我们设计架构时，首先就要分析系统的复杂性。


[[# 架构设计对于复杂性的具体判断]]
- **复杂度只是少数部分，即使三个方面都有问题，也必须要进行优先级排序**
	- 大部分复杂度只是其中的某一个
	- 少数情况下包含其中两个
	- 三个或者三个以上的复杂度
		- 假的，这个系统之前设计的有问题，要么可能就是架构师的判断出现了失误
		- 真的，**要进行优先级排序**
[[#接手了一个每个复杂度都存在问题的系统，那应该怎么办呢？]]
- 答案是**一个个来解决问题，不要幻想一次架构重构解决所有问题**。
- 正确的做法是将主要的复杂度问题**列出来**，然后根据业务、技术、团队等综合情况进行排序，**优先解决当前面临的最主要的复杂度问题**。
	- 实际案例
		- 优化子系统数量->开发效率->这两方便提高了系统稳定性->最后引入异地多活

[[# 如果按照优先级来解决复杂度，可能会出现解决了优先级排在前面的复杂度后，解决后续复杂度的方案需要将已经落地的方案推倒重来？]]
- 不重来，这个担忧**理论上是可能的，但现实中几乎是不可能出现的，原因在于软件系统的可塑性和易变性**。
- 推倒重来，这个新的方案也必须能够同时解决已经被解决的复杂度问题，一般来说能够达到这种理想状态的方案基本都是依靠新技术的引入。
## 2. 背景/出处  
- 来源：
- 引文/摘要：  
  - …  
  - …  

## 3. 展开说明  

### 架构设计的本质目的是为了解决软件系统的复杂性
架构设计的本质目的是为了解决软件系统的复杂性，所以在我们设计架构时，首先就要分析系统的复杂性。
- 只有正确分析出了系统的复杂性，后续的架构设计方案才不会偏离方向；
- 否则，**如果对系统的复杂性判断错误，即使后续的架构设计方案再完美再先进，都是南辕北辙，做的越好，错的越多、越离谱**。

例如，如果一个系统的复杂度本来是业务逻辑太复杂，功能耦合严重，架构师却设计了一个TPS达到50000/秒的高性能架构，即使这个架构最终的性能再优秀也没有任何意义，因为架构没有解决正确的复杂性问题。
### 架构设计对于复杂性的具体判断
架构的复杂度主要来源于“高性能”​“高可用”​“可扩展”等几个方面，但架构师在具体判断复杂性的时候，不能生搬硬套，认为任何时候架构都必须同时满足这三方面的要求。

实际上大部分场景下，复杂度只是其中的某一个，少数情况下包含其中两个，如果真的出现同时需要解决三个或者三个以上的复杂度，要么说明这个系统之前设计的有问题，要么可能就是架构师的判断出现了失误，即使真的认为要同时满足这三方面的要求，也必须要进行优先级排序。

### 接手了一个每个复杂度都存在问题的系统，那应该怎么办呢？
如果运气真的不好，接手了一个每个复杂度都存在问题的系统，那应该怎么办呢？答案是一个个来解决问题，不要幻想一次架构重构解决所有问题。例如这个“亿级用户平台”的案例，后来接手的团队其实面临几个主要的问题：
- 系统稳定性不高，经常出各种莫名的小问题；
- 系统子系统数量太多，系统关系复杂，开发效率低；
- 不支持异地多活，机房级别的故障会导致业务整体不可用。如果同时要解决这些问题，就可能会面临这些困境：

要做的事情太多，反而感觉无从下手。设计方案本身太复杂，落地时间遥遥无期。同一个方案要解决不同的复杂性，有的设计点是互相矛盾的。例如，要提升系统可用性，就需要将数据及时存储到硬盘上，而硬盘刷盘反过来又会影响系统性能。


因此，正确的做法是将主要的复杂度问题列出来，然后根据业务、技术、团队等综合情况进行排序，优先解决当前面临的最主要的复杂度问题。​“亿级用户平台”这个案例，团队就优先选择将子系统的数量降下来，后来发现子系统数量降下来后，不但开发效率提升了，原来经常发生的小问题也基本消失了，于是团队再在这个基础上做了异地多活方案，也取得了非常好的效果。
### 如果按照优先级来解决复杂度，可能会出现解决了优先级排在前面的复杂度后，解决后续复杂度的方案需要将已经落地的方案推倒重来？
对于按照复杂度优先级解决的方式，存在一个普遍的担忧：如果按照优先级来解决复杂度，可能会出现解决了优先级排在前面的复杂度后，解决后续复杂度的方案需要将已经落地的方案推倒重来。这个担忧理论上是可能的，但现实中几乎是不可能出现的，原因在于软件系统的可塑性和易变性。对于同一个复杂度问题，软件系统的方案可以有多个，总是可以挑出综合来看性价比最高的方案。

即使架构师决定要推倒重来，这个新的方案也必须能够同时解决已经被解决的复杂度问题，一般来说能够达到这种理想状态的方案基本都是依靠新技术的引入。例如，Hadoop能够将高可用、高性能、大容量三个大数据处理的复杂度问题同时解决。

识别复杂度对架构师来说是一项挑战，因为原始的需求中并没有哪个地方会明确地说明复杂度在哪里，需要架构师在理解需求的基础上进行分析。有经验的架构师可能一看需求就知道复杂度大概在哪里；如果经验不足，那只能采取“排查法”​，从不同的角度逐一进行分析。


## 4. 与其他卡片的关联  
- 前置卡片：
- 后续卡片：
- 相似主题：

## 5. 应用/启发  
- 可以如何应用在工作、学习、生活中  
- 引发的思考与问题  

## 6. 待办/进一步探索  
- [ ] 深入阅读 xxx  
- [ ] 验证这个观点的边界条件  
