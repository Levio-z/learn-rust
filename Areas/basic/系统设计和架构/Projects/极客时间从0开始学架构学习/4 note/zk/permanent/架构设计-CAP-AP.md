---
tags:
  - permanent
---
## 1. 核心观点  

出现分区时，系统会优先保障数据一致性，不一致的节点仍然提供服务，虽然不是一个“正确”的结果，但是一个“合理”的结果


## 2. 背景/出处  

## 3. 展开说明  
#### AP - Availability/Partition Tolerance

如下图所示，为了保证可用性，当发生分区现象后，N1节点上的数据已经更新到y，但由于N1和N2之间的复制通道中断，数据y无法同步到N2，N2节点上的数据还是x。这时客户端C访问N2时，N2将当前自己拥有的数据x返回给客户端C了，而实际上当前最新的数据已经是y了，这就不满足一致性（Consistency）的要求了，因此CAP三者只能满足AP。注意：这里N2节点返回x，虽然不是一个“正确”的结果，但是一个“合理”的结果，因为x是旧的数据，并不是一个错乱的值，只是不是最新的数据而已。

![](asserts/Pasted%20image%2020251219093458.png)


### AP的最终CA
**而对于用户信息数据，假设我们选择了AP，则分区发生后，节点1和节点2都可以修改用户信息，但两边可能修改不一样**。例如，用户在节点1中将爱好改为“旅游、美食、跑步”​，然后用户在节点2中将爱好改为“美食、游戏”​，节点1和节点2都记录了未同步的爱好数据，当分区恢复后，系统按照某个规则来合并数据。例如，按照“最后修改优先规则”将用户爱好修改为“美食、游戏”​，按照“字数最多优先规则”则将用户爱好修改为“旅游，美食、跑步”​，也可以完全将数据冲突报告出来，由人工来选择具体应该采用哪一条。
## 4. 与其他卡片的关联  
- 前置卡片：
- 后续卡片：
- 相似主题：

## 5. 应用/启发  
- 可以如何应用在工作、学习、生活中  
- 引发的思考与问题  

## 6. 待办/进一步探索  
- [ ] 深入阅读 xxx  
- [ ] 验证这个观点的边界条件  
