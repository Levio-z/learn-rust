---
tags:
  - permanent
---
## 1. 核心观点  

水平分配让我们能够突破单台机器处理性能的瓶颈，通过增加更多的机器来满足业务的性能需求，**但如果业务本身也越来越复杂，单纯只通过任务分配(水平扩展)的方式来扩展性能，收益会越来越**低。

业务逻辑越来越复杂，系统中那些**无法并行处理的部分（串行部分）**、**多个节点必须共同访问的资源（共享资源）**、以及**节点之间为保持一致性所需的通信与协调开销**都会增加。

这些因素的叠加，会让系统在“加机器”的情况下，性能提升的幅度**越来越小**——这就是“**水平扩展的边际收益下降**”。

## 2. 背景/出处  

## 3. 展开说明  
### 例子
例如，业务简单的时候 1 台机器扩展到 10 台机器，性能能够提升 8 倍（需要扣除机器群带来的部分性能损耗，因此无法达到理论上的 10 倍那么高），但如果业务越来越复杂，1 台机器扩展到 10 台，性能可能只能提升 5 倍。
### 1. 串行部分增加

- 部分任务无法并行，如事务校验、全局排序、单点汇总。
- 即使有 100 台机器，这些串行部分也只能由 1 台执行。
- Amdahl 定律说明：串行比例越大，总加速比越小。

### 2. 共享资源瓶颈

- 多个节点访问同一数据库、缓存、文件系统或消息队列时，会出现锁竞争、排队等待；
- 数据一致性协议（如 Paxos、Raft）进一步增加访问延迟；
- 节点越多，这种竞争越严重。
    

### 3. 协调与通信开销上升

- 分布式系统中的节点必须同步状态（心跳、选主、数据一致性）；
- 每次增加节点，通信链路数量近似平方级增长 O(n2)O(n^2)O(n2)；
- 网络延迟与协议复杂度使性能收益递减。

## 4. 与其他卡片的关联  
- 前置卡片：
	- [架构设计-高性能-集群复杂度](架构设计-高性能-集群复杂度.md)
- 后续卡片：
	- 
- 相似主题：

## 5. 应用/启发  
- 可以如何应用在工作、学习、生活中  
- 引发的思考与问题  

## 6. 待办/进一步探索  
- [x] 此外，“任务分配器”也并不一定只能是物理上存在的机器或者一个独立运行的程序，也可以是嵌入在其他程序中的算法，例如 Memcache 的集群架构。
- [x] 这个分配器可能是硬件网络设备（例如，F5、交换机等），可能是软件网络设备（例如，LVS），也可能是负载均衡软件（例如，Nginx、HAProxy），还可能是自己开发的系统。
- [x] 常见的方法包括 DNS 轮询、智能 DNS、CDN（Content Delivery Network，内容分发网络）、GSLB 设备（Global Server Load Balance，全局负载均衡）等。
