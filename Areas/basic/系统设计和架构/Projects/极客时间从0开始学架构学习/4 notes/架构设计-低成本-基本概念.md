---
tags:
  - permanent
---
## 1. 核心观点  
when：**架构方案涉及几百上千甚至上万台服务器，成本就会变成一个非常重要的架构设计考虑点**
what：轻松节约几千万元，不但**展现了技术的强大力量，也带来了可观的收益**
how：**我们需要减少服务器的数量才能达成低成本的目标**。因此，低成本本质上是与高性能和高可用冲突的，所以低成本很多时候不会是架构设计的首要目标，而**是架构设计的附加约束**。
- **如果无论如何都无法设计出满足成本要求的方案，那就只能找老板调整成本目标了**。
复杂度：**只有“创新”才能达到低成本目标**
- 引入新技术：去熟悉新技术，并且将新技术与已有技术结合起来
- 开创一个全新的技术：需要自己去创造全新的理念和技术，并且新技术跟旧技术相比，需要有质的飞跃**。
- 难度：**创造新技术复杂度更高**，**大公司才有足够的资源、技术和时间去创造新技术**。
## 2. 背景/出处  

## 3. 展开说明  
### 什么时候会考虑低成本

当我们的架构方案只涉及几台或者十几台服务器时，一般情况下成本并不是我们重点关注的目标，但如果**架构方案涉及几百上千甚至上万台服务器，成本就会变成一个非常重要的架构设计考虑点**。
### 一个简单的例子
例如，A方案需要10000台机器，B方案只需要8000台机器，单从**比例来看，也就节省了20%的成本**，但从数量来看，B方案能节省2000台机器，1台机器成本预算每年大约2万元，这样一年下来就能节省4000万元，4000万元成本不是小数目，给100人的团队发奖金每人可以发40万元了，这可是算得上天价奖金了。通过一个架构方案的设计，就能轻松节约几千万元，不但**展现了技术的强大力量，也带来了可观的收益**，对于技术人员来说，最有满足感的事情莫过于如此了。
### HOW

当我们设计“高性能”​“高可用”的架构时，通用的手段都是增加更多服务器来满足“高性能”和“高可用”的要求；而低成本正好与此相反，**我们需要减少服务器的数量才能达成低成本的目标**。因此，低成本本质上是与高性能和高可用冲突的，所以低成本很多时候不会是架构设计的首要目标，而**是架构设计的附加约束**。也就是说，我们首先设定一个成本目标，当我们根据高性能、高可用的要求设计出方案时，评估一下方案是否能满足成本目标，如果不行，就需要重新设计架构；**如果无论如何都无法设计出满足成本要求的方案，那就只能找老板调整成本目标了**。

低成本给架构设计带来的**主要复杂度体现在，往往只有“创新”才能达到低成本目标**。这里的“创新”既包括**开创一个全新的技术领域（这个要求对绝大部分公司太高）​，也包括引入新技术**，如果没有找到能够解决自己问题的新技术，那么就真的需要自己创造新技术了。

#### 例子
- NoSQL（Memcache、Redis等）的出现是为了解决关系型数据库无法应对高并发访问带来的访问压力。
- 全文搜索引擎（Sphinx、Elasticsearch、Solr）的出现是为了解决关系型数据库like搜索的低效的问题。
- Hadoop的出现是为了解决传统文件系统无法应对海量数据存储和计算的问题
- Facebook为了解决PHP的低效问题，刚开始的解决方案是HipHop PHP，可以将PHP语言翻译为C++语言执行，后来改为HHVM，将PHP翻译为字节码然后由虚拟机执行，和Java的JVM类似。
- 新浪微博将传统的Redis/MC + MySQL方式，扩展为Redis/MC + SSD Cache +MySQL方式，SSD Cache作为L2缓存使用，既解决了MC/Redis成本过高，容量小的问题，也解决了穿透DB带来的数据库访问压力（来源：http://www.infoq.com/cn/articles/weibo-platform-archieture ）​。
- Linkedin为了处理每天5千亿的事件，开发了高效的Kafka消息系统。
- 其他类似将Ruby on Rails改为Java、Lua + redis改为Go语言实现的例子还有很多。

无论是引入新技术，还是自己创造新技术，都是一件复杂的事情。引入新技术的主要复杂度在于**需要去熟悉新技术，并且将新技术与已有技术结合起来**；**创造新技术的主要复杂度在于需要自己去创造全新的理念和技术，并且新技术跟旧技术相比，需要有质的飞跃**。

相比来说，创造新技术复杂度更高，因此一般中小公司基本都是靠引入新技术来达到低成本的目标；而大公司更有可能自己去创造新的技术来达到低成本的目标，因为大公司才有足够的资源、**技术和时间去创造新技术**。




## 4. 与其他卡片的关联  
- 前置卡片：
	- [架构设计-复杂度来源：高可用、高性能、低成本、安全、规模-基本概念](架构设计-复杂度来源：高可用、高性能、低成本、安全、规模-基本概念.md)
- 后续卡片：
	- 
- 相似主题：

## 5. 应用/启发  
- 可以如何应用在工作、学习、生活中  
- 引发的思考与问题  

## 6. 待办/进一步探索  
- [ ] 深入阅读 xxx  
- [ ] 验证这个观点的边界条件  
