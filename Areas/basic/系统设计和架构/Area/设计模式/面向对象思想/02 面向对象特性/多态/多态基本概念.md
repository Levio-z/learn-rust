### 多态
多态。多态是指，子类可以替换父类，在实际的代码运行过程中，调用子类的方法实现。

语法实现：
- 父类对象可以引用子类对象
- 持子类可以重写（override）父类中的方法

- 继承
- 接口
- duck-typing
**Duck typing** 指的是一种动态语言中常见的类型策略：
> “如果它走路像鸭子，叫声像鸭子，那它就是鸭子。”
即：不关心对象的实际类型，只要它实现了某些行为（方法），就可以使用它。这在 **Python、JavaScript** 等动态语言中很常见。

Python 的鸭子类型（Duck Typing）：

```python
class Duck:
    def quack(self):
        print("quack")

class Person:
    def quack(self):
        print("I'm pretending to be a duck")

def make_it_quack(thing):
    thing.quack()  # 不关心类型，只关心是否有 .quack 方法

make_it_quack(Duck())     # ✅
make_it_quack(Person())   # ✅

```

**关键点**：没有声明 `implements` 或 `interface`，只要有 `quack()` 方法就行。
#### 多态的意义
多态特性能提高代码的可扩展性和复用性。

在那个例子中，我们利用多态的特性，仅用一个 print() 函数就可以实现遍历打印不同类型（Array、LinkedList）集合的数据。

多态提高了代码的可扩展性。如果我们不使用多态特性，我们就无法将不同的集合类型（Array、LinkedList）使用某一种逻辑相同的方法。
- print() 函数的打印逻辑，就能应对各种集合数据的打印操作，这显然提高了代码的复用性。

多态也是很多设计模式、设计原则、编程技巧的代码实现基础，比如策略模式、基于接口而非实现编程、依赖倒置原则、里式替换原则、利用多态去掉冗长的 if-else 语句

等等
#### if else
```rust
fn run_command(cmd: &str) {
    if cmd == "start" {
        println!("starting...");
    } else if cmd == "stop" {
        println!("stopping...");
    } else if cmd == "restart" {
        println!("restarting...");
    } else {
        println!("unknown command");
    }
}
```
定义抽象trait
```rust
trait Command {
    fn execute(&self);
}
```
实现
```rust
struct StartCommand;
struct StopCommand;
struct RestartCommand;

impl Command for StartCommand {
    fn execute(&self) {
        println!("starting...");
    }
}

impl Command for StopCommand {
    fn execute(&self) {
        println!("stopping...");
    }
}

impl Command for RestartCommand {
    fn execute(&self) {
        println!("restarting...");
    }
}

```
定义get_command
```rust
fn get_command(cmd: &str) -> Option<Box<dyn Command>> {
    match cmd {
        "start" => Some(Box::new(StartCommand)),
        "stop" => Some(Box::new(StopCommand)),
        "restart" => Some(Box::new(RestartCommand)),
        _ => None,
    }
}

```
调用
```rust
fn run_command(cmd: &str) {
    match get_command(cmd) {
        Some(c) => c.execute(),
        None => println!("unknown command"),
    }
}
```