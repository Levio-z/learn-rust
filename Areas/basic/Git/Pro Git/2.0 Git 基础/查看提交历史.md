 log`git log` 会按提交时间列出所有的更新，最近的更新排在最上面


`git log` 有许多选项可以帮助你搜寻你所要找的提交， 接下来我们介绍些最常用的。

一个常用的选项是 `-p`，用来显示每次提交的内容差异。 你也可以加上 `-2` 来仅显示最近两次提交：

```console
git log -p -2
```

- 总结
	- 正如你所看到的，`--stat` 选项在每次提交的下面列出额所有被修改过的文件、有多少文件被修改了以及被修改过的文件的哪些行被移除或是添加了
```
git log  --stat -p -2
```

另外一个常用的选项是 `--pretty`。
- 这个选项可以指定使用不同于默认格式的方式展示提交历史。 这个选项有一些内建的子选项供你使用。 比如用 `oneline` 将每个提交放在一行显示，查看的提交数很大时非常有用。 另外还有 `short`，`full` 和 `fuller` 可以用，展示的信息或多或少有些不同，请自己动手实践一下看看效果如何。


但最有意思的是 format，可以定制要显示的记录格式。 这样的输出对后期提取分析格外有用 — 因为你知道输出的格式不会随着Git的更新而发生改变：

```console
$ git log --pretty=format:"%h - %an, %ar : %s"
ca82a6d - Scott Chacon, 6 years ago : changed the version number
085bb3b - Scott Chacon, 6 years ago : removed unnecessary test
a11bef0 - Scott Chacon, 6 years ago : first commit
```
Table 1. `git log --pretty=format` 常用的选项

|选项|说明|
|---|---|
|`%H`|提交对象（commit）的完整哈希字串|
|`%h`|提交对象的简短哈希字串|
|`%T`|树对象（tree）的完整哈希字串|
|`%t`|树对象的简短哈希字串|
|`%P`|父对象（parent）的完整哈希字串|
|`%p`|父对象的简短哈希字串|
|`%an`|作者（author）的名字|
|`%ae`|作者的电子邮件地址|
|`%ad`|作者修订日期（可以用 --date= 选项定制格式）|
|`%ar`|作者修订日期，按多久以前的方式显示|
|`%cn`|提交者(committer)的名字|
|`%ce`|提交者的电子邮件地址|
|`%cd`|提交日期|
|`%cr`|提交日期，按多久以前的方式显示|
|`%s`|提交说明|

你一定奇怪 _作者_ 和 _提交者_ 之间究竟有何差别， 其实作者指的是实际作出修改的人，提交者指的是最后将此工作成果提交到仓库的人。 所以，当你为某个项目发布补丁，然后某个核心成员将你的补丁并入项目时，你就是作者，而那个核心成员就是提交者。 我们会在 [[_distributed_git]](https://bingohuang.gitbooks.io/progit2/content/02-git-basics/sections/viewing-history.html#_distributed_git) 再详细介绍两者之间的细微差别。

当 oneline 或 format 与另一个 `log` 选项 `--graph` 结合使用时尤其有用。 这个选项添加了一些ASCII字符串来形象地展示你的分支、合并历史：


当 oneline 或 format 与另一个 `log` 选项 `--graph` 结合使用时尤其有用。 这个选项添加了一些ASCII字符串来形象地展示你的分支、合并历史：
```console
$ git log --pretty=format:"%h %s" --graph
* 2d3acf9 ignore errors from SIGCHLD on trap
*  5e3ee11 Merge branch 'master' of git://github.com/dustin/grit
|\
| * 420eac9 Added a method for getting the current branch.
* | 30e367c timeout code and tests
* | 5a09431 add timeout protection to grit
* | e1193f8 support for heads with slashes in them
|/
* d6016bc require time for xmlschema
*  11d191e Merge branch 'defunkt' into local
```

这种输出类型会在我们下一张学完分支与合并以后变得更加有趣。

以上只是简单介绍了一些 `git log` 命令支持的选项。 [`git log` 的常用选项](https://bingohuang.gitbooks.io/progit2/content/02-git-basics/sections/viewing-history.html#log_options) 列出了我们目前涉及到的和没涉及到的选项，已经它们是如何影响 log 命令的输出的：

Table 2. `git log` 的常用选项

|选项|说明|
|---|---|
|`-p`|按补丁格式显示每个更新之间的差异。|
|`--stat`|显示每次更新的文件修改统计信息。|
|`--shortstat`|只显示 --stat 中最后的行数修改添加移除统计。|
|`--name-only`|仅在提交信息后显示已修改的文件清单。|
|`--name-status`|显示新增、修改、删除的文件清单。|
|`--abbrev-commit`|仅显示 SHA-1 的前几个字符，而非所有的 40 个字符。|
|`--relative-date`|使用较短的相对时间显示（比如，“2 weeks ago”）。|
|`--graph`|显示 ASCII 图形表示的分支合并历史。|
|`--pretty`|使用其他格式显示历史提交信息。可用的选项包括 oneline，short，full，fuller 和 format（后跟指定格式）。|



### 限制输出长度



另外还有按照时间作限制的选项，比如 `--since` 和 `--until` 也很有用。 例如，下面的命令列出所有最近两周内的提交：

```console
$ git log --since=2.weeks
```


这个命令可以在多种格式下工作，比如说具体的某一天 `"2008-01-15"`，或者是相对地多久以前 `"2 years 1 day 3 minutes ago"`。

用 `--author` 选项显示指定作者的提交，用 `--grep` 选项搜索提交说明中的关键字。 （请注意，如果要得到同时满足这两个选项搜索条件的提交，就必须用 `--all-match` 选项。否则，满足任意一个条件的提交都会被匹配出来）

另一个非常有用的筛选选项是 `-S`，可以列出那些添加或移除了某些字符串的提交。 比如说，你想找出添加或移除了某一个特定函数的引用的提交，你可以这样使用：


```console
$ git log -Sfunction_name
```
`git log -Sfunction_name` 是 Git 中非常有用的命令，用于查找在代码历史中**增加或删除**了特定字符串（比如函数名）的位置。


Table 3. 限制 `git log` 输出的选项

|选项|说明|
|---|---|
|`-(n)`|仅显示最近的 n 条提交|
|`--since`, `--after`|仅显示指定时间之后的提交。|
|`--until`, `--before`|仅显示指定时间之前的提交。|
|`--author`|仅显示指定作者相关的提交。|
|`--committer`|仅显示指定提交者相关的提交。|
|`--grep`|仅显示含指定关键字的提交|
|`-S`|仅显示添加或移除了某个关键字的提交|


来看一个实际的例子，如果要查看 Git 仓库中，2008 年 10 月期间，Junio Hamano 提交的但未合并的测试文件，可以用下面的查询命令：

```
```console
$ git log --pretty="%h - %s" --author=gitster --since="2008-10-01" \
   --before="2008-11-01" --no-merges -- t/
5610e3b - Fix testcase failure when extended attributes are in use
acd3b9e - Enhance hold_lock_file_for_{update,append}() API
f563754 - demonstrate breakage of detached checkout with symbolic link HEAD
d1a43f2 - reset --hard/read-tree --reset -u: remove unmerged new paths
51a94af - Fix "checkout --track -b newbranch" on detached HEAD
b0ad11e - pull: allow "git pull origin $something:$current_branch" into an unborn branch
```
`--no-merges` 
- 排除合并提交（只显示普通提交） 
-- t/`
- 只查看影响到 `t/` 目录下文件的提交
