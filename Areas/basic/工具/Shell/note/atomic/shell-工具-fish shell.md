---
tags:
  - fleeting
---
## 1. 核心观点  
### Ⅰ. 概念层
**fish（Friendly Interactive SHell）** 是一种面向**交互式使用**的现代 Shell，强调**开箱即用的用户体验**，而非严格的 POSIX 兼容性。

其设计目标不是“替代 bash 作为脚本语言”，而是：

> 成为一个 **高效率的人机交互接口（Human ↔ OS）**

### ### 初始设置 · 解决的问题（Why）

fish 主要解决传统 shell（bash / zsh）在**交互层面**的痛点：

- 自动补全依赖大量插件
    
- 默认无语法高亮
    
- 历史命令利用率低
    
- 变量 / 数组 /字符串语义混乱
    
- 新手学习成本高，但老手收益有限
    

fish 的核心判断是：

> **交互效率比兼容性更重要**
---

### 初始设置 · 核心特性（What it offers）

- **强默认体验**
    
    - 语法高亮（基于可执行性）
        
    - 基于历史的智能补全
        
- **一致的语法设计**
    
    - 显式 `set` 变量模型

    - 原生列表（无 `$@` / IFS 陷阱）
        
- **内建能力**
    
    - 命令执行耗时统计
        
    - Web UI 配置（`fish_config`）
        
- **更安全的交互语义**
	- 避免大量 bash 中的隐式行为
###  初始设置 · 非目标与代价（Trade-offs）

fish **刻意不追求**：

- POSIX Shell 兼容
    
- 作为 `/bin/sh`
    
- 复杂脚本生态主导地位
    

带来的结果：

- ❌ 直接运行 bash 脚本可能失败
    
- ❌ CI / 系统脚本不适合用 fish
    
- ✅ 交互体验显著优于 bash/zsh
### Ⅱ. 应用层

### ### 初始设置 · 工作定位（Where it fits）

fish 的合理定位是：

- **交互式开发 Shell**
    
- **REPL 外壳**
    
- **命令探索 / 调试环境**
    

而不是：

- 系统初始化脚本
    
- 跨机器可移植脚本
    
- 构建系统的默认 shell
    

> 实践共识：**fish for humans，bash for machines**

### ### 初始设置 · 底层机制要点（How）

- 每个外部命令由 fish `fork + exec`
    
- 使用内核 `wait4 / rusage` 获取：
    
    - 用户态 CPU 时间
        
    - 内核态 CPU 时间
        
- 内建补全系统基于：
    
    - 命令 AST
        
    - 已知选项元数据
        
    - 历史执行上下文
        

fish 的“智能”不是魔法，而是 **更积极地利用 OS 能力**。
### Ⅲ. 实现层

### **IV**.原理层


## 2. 背景/出处  
- 来源：
	- 
- 引文/摘要：  
  - …  
  - …  

## 3. 展开说明  

### time 看程序运行时间
```
________________________________________________________
Executed in    1.04 secs      fish           external
   usr time   31.88 millis  276.00 micros   31.61 millis
   sys time   12.45 millis  595.00 micros   11.85 millis

```


#### 列
##### 第一列
**含义**
- 命令的 **墙钟时间（Wall Clock Time）**
**定义**
- 从命令开始执行到完全结束的真实经过时间
**包含**
- CPU 执行
- I/O 等待
- 调度等待
- 子进程等待
**不包含**
- shell 启动前时间
- 其他后台任务
##### 第二列
**含义**
- 产生该统计信息的 **shell 名称**
**作用**
- 说明 timing 是由 **fish shell** 生成
- 用于区分不同 shell 的统计格式
**注意**
- 不是被执行的程序
- 不代表程序是 fish
##### 初始设置：第 4 列 — external
**含义**
- 命令类型标识
**external 的定义*
- 通过 `fork + exec` 启动的**外部程序**
**对比**
- `external`：ls、cargo、grep
- `builtin`：cd、set、jobs（fish 内建）
**系统层面意义**
- external ⇒ 一定有：
    - 新进程创建
    - 系统调用
    - 上下文切换




## 4. 与其他卡片的关联  
- 前置卡片：
- 后续卡片：
- 相似主题：

## 5. 应用/启发  
- 可以如何应用在工作、学习、生活中  
- 引发的思考与问题  

## 6. 待办/进一步探索  
 
  
