| 版本  | 日期       | 内容                          |
| --- | -------- | --------------------------- |
| 0.0 | 25.08.27 | 初始化：**汇总浙大软件工程中的模型和敏捷开发原则** |
### 1、选用什么开发模型？
[第 4 章 过程模型](../../../../course/浙大软件工程/note/第%204%20章%20过程模型.md)
- google的模型参考

| 特征          | 对应模型/理念                             |
| ----------- | ----------------------------------- |
| 持续集成、主干开发   | **Trunk-Based Development**（主干开发模型） |
| 小步迭代 + 快速发布 | **增量式开发**（Incremental Development）  |
| 强调数据驱动和实验验证 | **演化式开发 / Spiral-like**             |
| 团队自治        | **组件化 / 面向模块的迭代开发**                 |
Trunk-Based Development（TBD）
- **核心特点**
	- 所有开发者每天甚至每次提交都合并到主干。
	- 分支生命周期短，通常不超过几天。
	- 强制自动化测试（CI），保证主干始终可构建、可部署。
	- 常与 Feature Flags 配合，控制功能发布
	**原理**
	- 避免长期分支带来的集成冲突。
	- 通过频繁集成，快速发现问题，降低“集成地狱”风险。
	**使用场景**
	- 大型互联网公司（Google、Facebook 等）采用。
	- 需要快速迭代、多人并行开发、高度自动化测试保障的项目。
增量模型：小步迭代 + 快速发布（Incremental Development）
- 增量式开发是一种开发策略，将软件划分为多个小的功能模块或“增量”，每次只实现一部分并发布，而不是一次性交付整个系统。
强调数据驱动和实验验证（演化式开发 / Spiral-like）
- 演化式开发（Evolutionary / Spiral Model）是一种迭代式开发方法，每次迭代包括**规划 → 风险分析 → 实现 → 评估**，通过实验和数据反馈不断演化系统。
- 原型和螺旋模型也可以使用
组件模型
- **最大化复用现有组件，减少开发时间与成本**  
面向方面的软件开发
-  **横切关注点**：**AOSD专注于那些跨越多个模块或功能的关注点，这些关注点通常被称为横切关注点，例如日志、安全、事务管理等。**
- **关注点分离**：通过分离横切关注点，使得系统的核心功能与其他辅助功能（如日志记录、安全性等）解耦，从而提高代码的可维护性。
- **模块化**：每个关注点独立建模，避免了在多个地方重复实现相同的功能。

### 2、参考的原则
[第 5 章 敏捷开发（Agile Development）](../../../../course/浙大软件工程/note/第%205%20章%20敏捷开发（Agile%20Development）.md)
- 来自敏捷宣言
	- 个体与交互高于流程与工具
		- 围绕个体创造力，自组织团队，团队成员更多的是根据需求和情况灵活地分配任务和调整工作计划。
		- 项目社区（工业级极限编程），建立一个跨职能的团队协作社区，促进开发人员、业务人员、运维人员等多方协作，提高项目的可执行性和灵活性。**多方协作** **持续沟通**
	- 可工作的软件高于详尽的文档
	- 客户协作高于合同谈判
		- 沟通：利益相关者之间的有效沟通、与客户的沟通,每日协作
	- 响应变化高于遵循计划
		- 快速且适应性强的响应能力
- 敏捷核心特征
	- 客户对需求的描述（场景）驱动
	- 承认计划的时效性短（需持续调整）
	- 迭代增量方式
	- 重视变更
- 频繁交付
- 敏捷流程倡导**可持续开发**。发起人、开发人员和用户应能**长期保持稳定的工作节奏**。
	- 敏捷开发强调长期的、稳定的工作节奏，而不是临时的高强度加班或过度压榨团队成员的工作时间
- 持续**关注技术卓越和良好设计，可增强敏捷性**。
	- 良好的代码设计和架构可以使得团队在未来进行修改或扩展时更加容易，从而提升系统的可维护性和可扩展性，增强团队对变化的适应能力
- 简洁性 —— 即最大化未完成工作的艺术 —— 至关重要。
	- 简洁性是敏捷开发中的重要原则，**强调将工作精简到最核心的功能，避免过多的功能拖慢开发进度或增加不必要的复杂性。换句话说，团队应该专注于做最重要的事情，避免过度设计或实现功能过度扩展**。
	- 当开发新功能时，团队应尽量避免一次性完成所有功能需求，而是先实现最基本的、可交付的功能，确保产品在最短时间内发布和测试。这不仅能快速获取客户反馈，也能避免开发过多未被用户需要的特性。
- 最佳的架构、需求和设计来自自组织团队。
	- 一个自组织的团队能够灵活应对变化，及时调整架构设计和需求。例如，在遇到性能问题时，团队成员可以自主讨论并决定优化方案，而不需要上级管理进行干预或强制执行。
- 团队应定期反思如何提高效率，并据此调整自身行为。
	- 团队会组织一次回顾会议，讨论哪些工作做得好、哪些地方可以改进。根据讨论结果，团队可能会调整沟通方式、流程、工具使用等方面的内容，以便在下一个迭代中提高效率。
- 项目章程（工业级极限编程）
	- 明确项目的目标、范围和各利益相关方（stakeholders）的责任，为项目提供一个正式的指导文件。
	- **内容**：
    
    - 设定项目的整体目标和愿景，定义关键成果和可交付成果。
        
    - 确定各利益相关方的责任和角色，包括客户、开发团队、业务部门等，明确他们的职责和期望。

    - 制定项目的范围和时间线，确保所有参与者对项目的期望一致。
- **测试驱动管理（工业级极限编程）
	- **目标**：通过可量化的测试目标来驱动项目的管理决策，确保项目进展的可测量性和可控性。
	- **内容**：
	    - 对项目进行量化管理，制定明确的、可衡量的测试目标。
	    - 通过测试驱动的方法来指导项目的各个环节，包括进度控制、风险管理、质量保证等。
	    - 定期检查项目是否达到了预设的测试目标，并根据结果做出调整。  
	- **重要性**：这种管理方式通过定量化目标和持续反馈来确保项目能够按时按质完成，减少了管理中的主观偏差。
- 回顾会议（Retrospectives）
	- 定期进行项目回顾，反思项目进展中的问题，并为下一阶段的工作提供改进建议
	- **内容**：
	    - 团队定期回顾项目中的问题、挑战和成功经验，分析问题产生的根本原因。
	    - 总结哪些实践有效，哪些需要改进，制定具体的行动计划来改进开发流程和团队协作。
	    - 在每个迭代或阶段结束后进行回顾，确保项目在过程中不断优化和调整。
	- **重要性**：回顾会议为项目团队提供了持续优化的机制，能够帮助团队从过去的经验中学习，提升团队的执行力和效率。
- 通过不断的培训和知识共享来提升团队的能力，保持团队的技术领先性和适应变化的能力。

- (Scrum)会议时间极短（通常 15 分钟以内），有时站立召开（“每日站会”），避免冗长讨论
	- 敏捷强调高效沟通，**每日站会（Daily Stand-up）** 是 Scrum 的经典实践。
	- 以保持精力集中、快速汇报进展和问题，避免冗长会议浪费时间。
	-  昨天完成了什么？
	- 今天计划做什么？
	- 遇到什么障碍？
- 遇到困难的
	- **架构为中心**
### 3、规划阶段




（一）XP 规划（XP Planning）

1. 从创建 “用户故事”（user stories）开始（用户以自然语言描述需求场景）。
2. 敏捷团队评估每个用户故事的成本（如工作量）。
3. 将用户故事分组，形成可交付的增量。
4. 确定增量的交付日期并做出承诺。
5. **完成第一个增量后，计算 “项目速度”（project velocity，即团队单位时间内完成的工作量）**，用于确定后续增量的交付日期。
 
 **就绪度评估（Readiness Assessment）**
- **目标**：在项目启动之前，评估团队的技术准备度、需求清晰度和其他资源的可用性，确保项目能够顺利启动并避免后续出现阻碍。
- **内容**：
    - 对团队的技能、经验进行评估，确保团队成员具备完成项目所需的能力。
    - 对技术栈、工具链和开发环境进行检查，确保项目的技术架构和基础设施能够支撑项目开发。
    - 对需求进行初步确认，确保业务目标、需求优先级以及客户的期望清晰明确。
- **重要性**：帮助识别潜在风险，避免项目启动后因为资源或需求问题导致的项目延误。

- Scrum 框架
	- 从需求待办列表中选取冲刺周期内的任务，明确目标
	- 开发工作被划分为 “数据包”（packets，即具体任务单元）
		- 每个任务都是可交付的、清晰定义的工作片段。
			- 降低复杂度，使开发更易管理。
			- 可以快速完成并交付部分功能，便于获取反馈。
	- 测试与文档工作随产品构建同步进行，不滞后于开发
		- 确保代码在开发过程中就被验证，同时文档也及时更新，避免出现“开发完成，但缺乏测试或文档”的情况。
	- 工作在 “冲刺”（sprints，通常为 2-4 周的固定周期）中开展，任务来源于 “需求待办列表”（backlog，即未完成的需求清单）
		- 敏捷团队按固定周期（Sprint）组织工作，每个 Sprint 包含团队承诺完成的若干任务。这些任务来源于 **需求待办列表（Backlog）**，即所有尚未完成的需求清单。通过冲刺的方式，团队可以集中精力完成可交付增量。
- 个人开发：在开发前对任务进行详细估算，包括所需时间、工作量、可能的风险和资源安排
### 4、设计阶段
（二）XP 设计（XP Design）
1. 遵循 **KIS 原则**（Keep It Simple，保持简洁），避免过度设计。
	-  **意思**：在设计和开发中，始终追求简单、清晰的解决方案，避免复杂的、不必要的功能和设计。**过度设计**（Over-engineering）会导致系统变得更加难以理解、维护和扩展。KIS 原则鼓励开发人员在满足当前需求的前提下，选择最简单、最直接的方案。
	- **示例**：如果系统需要一个简单的用户认证功能，就避免引入复杂的、过多的功能模块或不必要的抽象层次。只需要实现基础的登录、注册等功能，避免设计过度的用户管理模块，直到真正需要时再扩展。
2. 鼓励使用 **CRC 卡片**（Class-Responsibility-Collaborator，类 - 职责 - 协作卡片，用于梳理对象关系，详见第 8 章）。
	- **意思**：CRC 卡片是一种用于帮助开发人员分析和设计类和对象关系的工具。在 CRC 卡片中，每个卡片代表一个类，卡片内容包括该类的**职责**（Responsibility）和与其他类的**协作**（Collaborator）。这种方式帮助团队在设计阶段理解类之间的交互关系，从而使设计更加清晰和可扩展。
	- **示例**：比如设计一个“订单”类时，你可以创建一个 CRC 卡片，列出该类的职责（如管理订单、计算总价），并列出它需要与哪些类协作（如“用户”类、"支付"类）。这种方式帮助开发者聚焦于类的核心职责，并理解其与其他类的交互。
3. 针对复杂设计问题，建议创建 “探路解决方案”（spike solutions）—— 即设计原型，验证方案可行性。
4. 鼓励 “重构”（refactoring）—— 对程序内部设计进行迭代式优化，不改变外部功能，提升代码质量。

- 在编码前对系统或模块进行初步设计，包括架构、数据结构和模块接口
	-  作用**：
		- 提供编码蓝图，降低随意性
		- 发现潜在设计缺陷，减少后期返工
	    - **举例**：画出类图、模块调用关系、数据流图
- 
### 4、编码
（三）XP 编码（XP Coding）

1. 建议在编码前为用户故事编写单元测试（测试驱动开发思想）。
	- **高质量的代码**：通过 TDD，可以确保每个功能都经过单元测试的验证，减少错误的发生。
	- **更清晰的设计**：在编写测试的过程中，你需要提前考虑接口的设计和功能的实现，这有助于提高代码的设计质量。
	- **快速反馈**：测试的快速反馈让开发人员能够即时发现并修复问题，避免问题的积累。
	- **持续重构**：通过测试的保障，开发人员可以不断重构代码，提升代码质量，而不担心破坏现有功能。
2. 鼓励 “结对编程”（pair programming）：两名开发人员共用一台电脑，一人编码、一人审查，定期轮换角色，减少缺陷。
	- **减少缺陷**：由于代码在编写的同时得到了即时审查，能够减少错误的发生，提高代码质量。
	- **知识共享**：两名开发者通过合作，能够分享彼此的知识和技能。新人可以向有经验的开发者学习，而经验丰富的开发者也能从新人的角度获得不同的见解。
	- **提高开发速度**：结对编程可以减少回顾和调试的时间，因为代码在写的过程中就已经得到了审核和改进。
	- **提升团队协作**：这种方式增强了团队成员之间的协作与沟通能力，有助于促进团队的良好氛围和文化建设。
	- **提升代码设计**：通过双方的讨论和互动，能够在编码过程中更加关注代码的可维护性和可扩展性。
### 5、测试
（四）XP 测试（XP Testing）

1. 所有单元测试需每日执行，确保现有功能不被破坏（持续验证）。
	- 持续验证**指的是每天（甚至更频繁）执行所有单元测试，以确保新开发的代码或修改不会破坏现有的功能。每次提交代码后，自动执行单元测试，发现问题并及时修复。这是 **持续集成（CI）** 的一个重要环节，能有效防止出现回归性错误。
	- **每次提交代码时，必须确保不破坏现有功能**，这是敏捷开发和持续集成的重要目标之一。
2. “验收测试” 由客户定义，用于验证软件是否满足客户可见的功能需求，通常与每个增量的交付同步进行。
	- **验收测试**是由客户或产品负责人定义的测试，目的是验证开发的功能是否符合客户的需求和期望。验收测试通常是基于用户故事的，通过这些测试确保每个增量的交付都满足客户的可见需求。验收测试与每个增量的交付紧密相关，即每次迭代（Sprint）结束时，团队会与客户一起进行验收测试，确认交付的功能是否符合要求。
	- 确保开发的功能真正满足用户的需求和业务目标。
	- 避免开发团队与客户之间的需求误解或偏差。
	- 提供客户实时的反馈，确保开发方向正确。
### 6、总结
Scrum
- 每个冲刺结束后，向客户交付 “演示版”（demos）
	- 每个冲刺结束时，团队将完成的功能以可运行演示版的形式交付客户，并在固定时间内收集客户反馈。客户通过演示看到真实可用的功能，而不是文档或设计图，从而提供实际反馈。
		-  快速验证功能是否符合用户需求。
		- 为下一轮迭代提供方向。
		- 减少开发偏离客户需求的风险。
	- 在**规定的时间范围内完成特定活动**，以保证效率和节奏，不因讨论或反馈而无限延长。
- 冲刺回顾（Sprint Retrospective）：团队反思冲刺过程中的问题，优化下一轮冲刺流程。
- **事后分析（Postmortem / Post-Analysis）**
    - **定义**：记录错误类型、错误原因和解决方案，对整个开发过程进行反思。
    - **作用**：
        - 总结经验，减少未来同类错误
        - 支持个人能力的持续改进
    - **举例**：分析本次项目 10 个错误，其中 3 个是设计缺陷，7 个是编码失误，针对设计缺陷更新模块设计模板