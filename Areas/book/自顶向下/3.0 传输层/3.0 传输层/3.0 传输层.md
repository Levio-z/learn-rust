运输层位于应用层和网络层之间，是分层的网络体系结构的重要部分。该层为**运行在不同主机上的应用进程提供直接的通信服务**起着至关重要的作用。我们在本章采用的教学方法是，交替地讨论运输层的原理和这些原理在现有的协议中是如何实现的。与往常一样，我们将特别关注因特网协议，即 TCP 和 UDP 运输层协议。
我们将从讨论运输层和网络层的关系开始。这就为研究运输层第一个关键功能打好了基础，即将网络层的在两个端系统之间的交付服务扩展到运行在两个不同端系统上的应用层进程之间的交付服务。我们将在讨论因特网的无连接运输协议UDP时阐述这个功能。
然后我们重新回到原理学习上，面对计算机网络中最为基础性的问题之一，即**两个实体怎样才能在一种会丢失或损坏数据的媒体上可靠地通信。通过一系列复杂性不断增加(从而更真实!)的场景，我们将逐步建立起一套被运输协议用来解决这些问题的技术**。然后，我们将说明这些原理是如何体现在因特网面向连接的运输协议TCP 中的。
接下来我们讨论网络中的第二个基础性的重要问题，即**控制运输层实体的传输速率以避免网络中的拥塞，或从拥塞中恢复过来**。我们将考虑拥塞的原因和后果，以及常用的拥塞控制技术。在透彻地理解了拥塞控制问题之后，我们将研究TCP 应对拥塞控制的方法。
### 3.1 概述和运输层服务
运输层协议为运行在不同主机上的应用进程之间提供了逻辑通信(logie communica-tion)功能。
- 从应用程序的角度看，**通过逻辑通信，运行不同进程的主机好像直接相连一样**;
- 实际上，这些主机也许位于地球的两侧，通过很多路由器及多种不同类型的链路相连。**应用进程使用运输层提供的逻辑通信功能彼此发送报文，而无须考虑承载这些报文的物理基础设施的细节**。图3-1 图示了逻辑通信的概念。
如图3-1所示，运输层协议是在端系统中而不是在路由器中实现的。
- 在发送端，运输层将从发送应用程序进程接收到的报文转换成运输层分组，用因特网术语来讲该分组称为运输层报文段(segment)。
- 在发送端系统中，运输层将这些报文段传递给网络层，网路层将其封装成网络层分组(即数据报)并向目的地发送。
- 注意到下列事实是重要的:网络路由器仅作用于该数据报的网络层字段;即它们不检查封装在该数据报的运输层报文段的字段。
- 在接收端，网络层从数据报中提取运输层报文段，并将该报文段向上交给运输层。运输层则处理接收到的报文段，使该报文段中的数据为接收应用进程使用。
