我明白了您提供的关于文件锁（file locking）的信息，特别是关于 F_GETLK 命令的限制：
1. 进程不能测试自己是否持有锁： 进程不能使用 F_GETLK 来测试它自己是否在文件的某个部分持有一把锁。
2. F_GETLK 的定义： F_GEklTLK 命令返回的信息是是否有现有的锁阻止调用进程设置它自己的锁。
3. F_SETLK 和 F_SETLKW 的行为： 这两个命令总是替换调用进程现有的锁（如果存在）。
4. 结论： 因为调用进程总是替换自己的现有锁，它永远不会被自己持有的锁阻塞。因此，F_GETLK 命令永远不会报告调用进程自己持有的锁。
这清楚地解释了 F_GETLK 的设计目的和它在测试进程自身锁时的局限性。