### 3.7.1　字符串字面量
字符串字面量要用双引号括起来，它们使用与 char 字面量相同的反斜杠转义序列：
```rust
let speech = "\"Ouch!\" said the well.\n";
```
一个字符串可能跨越多行：
```rust
println!("In the room the women come and go,
 Singing of Mount Abora");
```

该字符串字面量中的换行符是字符串的一部分，因此也会包含在输出中。第 2 行开头的空格也是如此。
#### 以反斜杠结尾
如果字符串的一行以反斜杠结尾，那么就会丢弃其后的换行符和前导空格：
```rust
println!("It was a bright, cold day in April, and \ there were four of us—\ more or less.");
```

这会打印出单行文本。该字符串在“and”和“there”之间会有一个空格，因为在本程序中，第一个反斜杠之前有一个空格，而在破折号和“more”之间则没有空格。
#### r
在少数情况下，需要双写字符串中的每一个反斜杠，这让人不胜其烦。​（经典的例子是正则表达式和 Windows 路径。​）对于这些情况，Rust 提供了原始字符串。**原始字符串用小写字母 r 进行标记。原始字符串中的所有反斜杠和空白字符都会逐字包含在字符串**中。原始字符串不识别任何转义序列：
```rust
let default_win_install_path = r"C:\Program Files\Gorillas"; 
let pattern = Regex::new(r"\d+(\.\d+)*");
```
在 `r` 开头的字符串中，反斜杠 `\` 不会触发转义（`\n` 就是反斜杠加字母 n，不会换行），但是——  
**如果内容本身包含 `"`，就会和字符串的结束引号冲突**。
```rust
println!(r###" This raw string started with 'r###"'. Therefore it does not end until we reach a quote mark ('"') followed immediately by three pound signs ('###'): "###);
```
可以根据需要添加任意多个井号，以标明原始字符串的结束位置

原始字符串不要求井号的具体数量，只要求前后数量一致，且不会和内容相混淆。另外，原始字符串不会去掉前导空格。—译者注

### 3.7.2 字节串
带有 b 前缀的字符串字面量都是字节串。这样的字节串是 u8 值（字节）的切片而不是 Unicode 文本：

```rust
let method = b"GET"; 
assert_eq!(method, &[b'G', b'E', b'T']);
```
method 的类型是` &[u8; 3]`：它是对 3 字节数组的引用，没有刚刚讨论过的任何字符串方法，最像字符串的地方就是其书写语法，仅此而已。

字节串可以使用前面展示过的所有其他的字符串语法：可以跨越多行、可以使用转义序列、可以使用反斜杠来连接行等。不过原始字节串要以 br" 开头。

字节串不能包含任意 Unicode 字符，它们**只能使用 ASCII 和 \xHH 转义序列**。

### 3.7.3　内存中的字符串
Rust 字符串是 Unicode 字符序列，但它们并没有以 char 数组的形式存储在内存中，而是使用了 UTF-8（一种可变宽度编码）的形式。字符串中的每个 ASCII 字符都会存储在单字节中，而其他字符会占用多字节。图 3-3 展示了由以下代码创建的 String 值和 &str 值。

图 3-3 展示了由以下代码创建的 String 值和 &str 值。
```rust
let noodles = "noodles".to_string(); 
let oodles = &noodles[1..];
let poodles = "ಠ_ಠ";
```
![](asserts/Pasted%20image%2020250815164215.png)
图 3-3：String、&str 和 str

String 有一个可以调整大小的缓冲区，其中包含 UTF-8 文本。缓冲区是在堆上分配的，因此它可以根据需要或请求来调整大小

&str 也是一个胖指针，包含实际数据的地址及其长度。可以认为 &str 就是 `&[u8]`，但它能保证包含的是格式良好的 UTF-8。

**字符串字面量是指预分配文本的 &str，它通常与程序的机器码一起存储在只读内存区**。在前面的示例中，poodles 是一个字符串字面量，指向一块 7 字节的内存，它在程序开始执行时就已创建并一直存续到程序退出。

String 或 &str 的 .len() 方法会返回其长度。这个长度以字节而不是字符为单位：

&mut str 类型确实存在，但它没什么用，因为对 UTF-8 的几乎所有操作都会更改其字节总长度，但切片不能重新分配其引用目标的缓冲区。

### 3.7.4　String
`&str 非常像 &[T]，是一个指向某些数据的胖指针。而 String 则类似于 Vec<T>，如表3-11 所示。`

`表 3-11：Vec<T> 与 String 对比`

