---
tags:
  - note
---

跨域限制（即同源策略）是主要由**浏览器（User Agent）**负责识别和执行的，它不是 HTTP 协议本身的一部分。

以下是详细解释：

### 1. 浏览器的责任：同源策略 (Same-Origin Policy, SOP)

- **识别方：** **Web 浏览器**（如 Chrome, Firefox, Safari, Edge）。
- **策略：** 同源策略（SOP）是浏览器内置的一项**安全特性**。
- **执行方式：** 当浏览器中的 JavaScript 代码通过 `XMLHttpRequest` 或 `Fetch API` 发起一个 HTTP 请求时，浏览器会检查：
    1. 发出请求的脚本的“源”（Origin）。
    2. 请求的目标 URL 的“源”（Origin）。
    3. 如果两者的源不同，浏览器就会执行跨域限制。它会发送请求，但如果服务器响应中没有包含适当的 **CORS 头部**（即服务器没有明确授权），浏览器就会**拦截响应**，不将其数据暴露给前端脚本。
### 2. HTTP 协议的作用：CORS 机制

- **协议本身不限制：** HTTP 协议（如 HTTP/1.1 或 HTTP/2）本身并不关心“源”的问题。服务器接收到一个请求，无论它来自哪里，都会尝试处理并返回响应。
    
- **CORS 头部：** HTTP 协议通过定义一系列**响应头部字段**（例如 `Access-Control-Allow-Origin`）来**扩展**自身的功能，以支持跨域通信。这些头部是 **CORS（跨域资源共享）** 规范的一部分。
    
- **服务器配合：** 服务器需要根据 CORS 规范，在响应中添加这些特殊的 HTTP 头部，来**告知浏览器**：“我允许来自这个源的访问。”
    

### 总结

|特性|跨域限制（同源策略）|CORS 头部|
|---|---|---|
|**功能**|限制和阻止跨域通信（安全保障）|明确授权允许跨域通信（安全例外）|
|**谁负责**|**浏览器**（客户端）|**服务器**（通过 HTTP 响应头）|
|**关系**|浏览器发现跨域 → 浏览器发起限制 → 服务器通过 HTTP 头部来解除限制||

Export to Sheets

所以，**限制**是浏览器在执行；而**解除限制**（通过 CORS）是服务器利用 HTTP 协议的扩展能力（头部字段）来配合浏览器。

## link
[跨域-基本概念](跨域-基本概念.md)