## 1.1　使用HTTP协议访问Web
![](asserts/Pasted%20image%2020251014091715.png)
Web浏览器地址栏中指定的URL,Web浏览器从Web服务器端获取文件资源(resource)等信息，从而显示出Web页面。

![](asserts/Pasted%20image%2020251014102353.png)
客户端：通过**发送请求获取服务器资源的Web浏览器**等，都可称为客户端(client)。

Web使用一种名为HTTP（HyperText Transfer Protocol，超文本传输协议）的协议作为规范，完成从客户端到服务器端等一系列运作流程。而**协议是指规则的约定**。可以说，Web是建立在HTTP协议上通信的。
## 1.2　HTTP的诞生
在深入学习HTTP之前，我们先来介绍一下HTTP诞生的背景。了解背景的同时也能了解当初制定HTTP的初衷，这样有助于我们更好地理解
### 1.2.1　为知识共享而规划Web
1989年3月，互联网还只属于少数人。在这一互联网的黎明期，HTTP诞生了。
![](asserts/Pasted%20image%2020251014103054.png)
最初设想的基本理念是：**借助多文档之间相互关联形成的超文本(HyperText)**，连成可相互参阅的WWW（World Wide Web，万维网）​。

现在已提出了3项WWW构建技术，分别是：把SGML（Standard Generalized Markup Language，标准通用标记语言）作为页面的文本标记语言的HTML（HyperText Markup Language，超文本标记语言）​；作为文档传递协议的HTTP；指定文档所在地址的URL（Uniform Resource Locator，统一资源定位符）​。

WWW这一名称，是Web浏览器当年用来浏览超文本的客户端应用程序时的名称。现在则用来表示这一系列的集合，也可简称为Web。
### 1.2.2 Web成长时代
1990年，大家针对HTML 1.0草案进行了讨论，因HTML 1.0中存在多处模糊不清的部分，草案被直接废弃了。
1993年1月，现代浏览器的祖先NCSA（National Center for Supercomputer Applications，美国国家超级计算机应用中心）研发的Mosaic问世了。它以in-line（内联）等形式显示HTML的图像，在图像方面出色的表现使它迅速在世界范围内流行开来。

同年秋天，Mosaic的Windows版和Macintosh版面世。使用CGI技术的NCSA Web服务器、NCSA HTTPd 1.0也差不多是在这个时期出现的。

1994年的12月，网景通信公司发布了Netscape Navigator 1.0,1995年微软公司发布Internet Explorer 1.0和2.0

紧随其后的是现在已然成为Web服务器标准之一的Apache，当时它以Apache 0.2的姿态出现在世人眼前。而HTML也发布了2.0版本。那一年，Web技术的发展突飞猛进。
### **1.2.3　驻足不前的HTTP**

HTTP/0.9
HTTP于1990年问世。那时的HTTP并没有作为正式的标准被建立。
HTTP/1.0
HTTP正式作为标准被公布是在1996年的5月，版本被命名为HTTP/1.0，并记载于RFC1945。虽说是初期标准，但该协议标准至今仍被广泛使用在服务器端。
HTTP/1.1
1997年1月公布的HTTP/1.1是目前主流的HTTP协议版本。当初的标准是RFC2068，之后发布的修订版RFC2616就是当前的最新版本。

可见，作为Web文档传输协议的HTTP，它的版本几乎没有更新。新一代HTTP/2.0正在制订中，但要达到较高的使用覆盖率，仍需假以时日。

>（根据当前时间点（2025年），需要注意的是，**HTTP/2.0 实际上已经成为主流，并且更新的版本 HTTP/3 也已经被广泛部署。** 所以，原文内容描述的是一个**历史阶段**，体现了当时人们对新技术普及速度的看法。）

**当年HTTP协议的出现主要是为了解决文本传输的难题**。由于协议本身非常简单，于是在此基础上设想了很多应用方法并投入了实际使用。现在HTTP协议已经超出了Web这个框架的局限，被运用到了各种场景里。

>**协议的优势（简单性）：** 协议本身的设计**极其简单**，这是它能够快速普及和被广泛接受的关键原因。简单的协议更容易实现和调试。

>正是由于其简单和灵活的特性，人们可以在其基础上进行各种应用（比如最初的 Web 服务），并且随着时间的推移，HTTP 协议已经**远远超出了传统的 Web 浏览器访问网页这个框架**，被运用到了各种各样的场景中。


|应用场景|描述|
|---|---|
|**API 通信**|如今，几乎所有的 **RESTful API** 和大部分 **微服务** 之间的通信都使用 HTTP/HTTPS。应用程序通过 HTTP 请求来获取数据（`GET`）、提交数据（`POST`）或更新数据（`PUT`/`PATCH`）。|
|**移动应用**|所有的手机 App（iOS/Android）在与后端服务器交换数据时，几乎都使用 HTTP/HTTPS 协议。|
|**物联网 (IoT)**|许多 IoT 设备使用 HTTP 协议来发送传感器数据、接收命令或更新配置。|
|**软件更新**|各种桌面软件、操作系统和游戏通过 HTTP 协议下载更新包。|
|**Git 远程操作**|正如我们之前讨论的，Git 使用 HTTP/HTTPS 协议进行 `clone`、`fetch` 和 `push` 操作。|
|**流媒体**|许多视频流（如 HLS 或 MPEG-DASH）的底层数据传输也是基于 HTTP 协议的分段请求。|
## 1.3　网络基础TCP/IP
为了理解HTTP，我们有必要事先了解一下TCP/IP协议族。通常使用的网络（包括互联网）是在TCP/IP协议族的基础上运作的。而HTTP属于它内部的一个子集。接下来，我们仅介绍理解HTTP所需掌握的TCP/IP协议族的概要。若想进一步学习有关TCP/IP的知识，请参考其他讲解TCP/IP的专业书籍。

>之前看过自顶向下部分，这部分略过，只记录部分内容

IP地址指明了节点被分配到的地址，MAC地址是指网卡所属的固定地址。IP地址可以和MAC地址进行配对。IP地址可变换，但MAC地址基本上不会更改。

**ARP是一种用以解析地址的协议，根据通信方的IP地址就可以反查出对应的MAC地址。**

没有人能够全面掌握互联网中的传输状况
- 在到达通信目标前的中转过程中，那些计算机和路由器等网络设备只能获悉很粗略的传输路线。
- 这种机制称为路由选择(routing)，有点像快递公司的送货过程。想要寄快递的人，只要将自己的货物送到集散中心，就可以知道快递公司是否肯收件发货，该快递公司的集散中心检查货物的送达地址，明确下站该送往哪个区域的集散中心。接着，那个区域的集散中心自会判断是否能送到对方的家中。
- 我们是想通过这个比喻说明，**无论哪台计算机、哪台网络设备，它们都无法全面掌握互联网中的细节**。

DNS(Domain Name System)服务是和HTTP协议一样位于应用层的协议。它提供域名到IP地址之间的解析服务。

计算机既可以被赋予IP地址，也可以被赋予主机名和域名。比如www.hackr.jp。

**用户通常使用主机名或域名来访问对方的计算机，而不是直接通过IP地址访问**。因为与IP地址的一组纯数字相比，用字母配合数字的表示形式来指定计算机名更符合人类的记忆习惯。

为了解决上述的问题，DNS服务应运而生。**DNS协议提供通过域名查找IP地址，或逆向从IP地址反查域名的服务。**

![](asserts/Pasted%20image%2020251014105126.png)
## 1.7 URI 和 URL

**Uniform**
规定统一的格式可方便处理多种不同类型的资源，而不用根据上下文环境来识别资源指定的访问方式。
- **确定性高：** 程序的行为是确定的。不会因为环境变化而做出错误的判断。
    
- **效率高：** **无需进行多余的检查、回溯历史或进行复杂的逻辑判断**来识别资源类型，可以直接跳转到正确的处理模块。
    
- **可扩展性好：** 只要新的协议（如 `git://`）遵循 `方案名://` 的基础模式，任何现有的网络软件都能识别出一个新的方案，然后将这个资源交给专门处理该方案的模块去执行，不需要修改所有底层代码。

另外，加入新增的协议方案（如http：或ftp:）也更容易。
**Resource**
资源的定义是“可标识的任何东西”​。不仅是文档文件，图像或服务（例如当天的天气预报）等能够**区别于其他类型的，全都可作为资源**。

另外，资源不仅可以是单一的，也可以是多数的集合体。
**Identifier**
表示可标识的对象。也称为标识符。综上所述，URI就是由某个协议方案表示的资源的定位标识符。

**协议方案是指访问资源所使用的协议类型名称。采用HTTP协议时，协议方案就是http**。除此之外，还有ftp、mailto、telnet、file等。标准的URI协议方案有30种左右，由隶属于国际互联网资源管理的非营利社团ICANN（Internet Corporation for Assigned Names and Numbers，互联网名称与数字地址分配机构）的IANA（Internet Assigned Numbers Authority，互联网号码分配局）管理颁布。

URI用字符串**标识某一互联网资源，而URL表示资源的地点（互联网上所处的位置）​。可见URL是URI的子集。**

URI (统一资源标识符) 的主要子集在技术标准中被明确划分为两大类：

1. **URL (统一资源定位符):** 用来**定位**资源。
    
2. **URN (统一资源名称):** 用来**命名**资源。
	1. 图书永久名称

因此，从技术标准的角度来看，**URL 和 URN 是 URI 最主要的两个子集，它们共同构成了 URI 的整体。**

“RFC3986：统一资源标识符(URI)通用语法”中列举了几种URI例子，如下所示。
### 1.7.2 URI格式
- **绝对 URI（Absolute URI）**：URI 的完整形式，包含了**方案名**。通常我们说的 **绝对 URL** 就是最常见的绝对 URI。
    
- **绝对 URL（Absolute URL）**：一个完整的、可直接定位资源的地址，包括协议、主机名等。
    
- **相对 URL（Relative URL）**：省略了协议和主机名，必须依赖于一个**基本 URI (Base URI)**（通常是当前页面的地址）才能解析出完整的绝对 URL。
![](asserts/Pasted%20image%2020251014110513.png)
使用http：或https：等协议方案名获取访问资源时要指定协议类型。不区分字母大小写，最后附一个冒号(:)。
也可使用data：或javascript：这类指定数据或脚本程序的方案名。

**登录信息（认证）**
指定用户名和密码作为从服务器端获取资源时必要的登录信息（身份认证）​。此项是可选项。
**服务器地址**
使用绝对URI必须指定待访问的服务器地址。地址可以是类似hackr.jp这种DNS可解析的名称，或是192.168.1.1这类IPv4地址名，还可以是`[0:0:0:0:0:0:0:1]`这样用方括号括起来的IPv6地址名。
**服务器端口号**
指定服务器连接的网络端口号。此项也是可选项，若用户省略则自动使用默认端口号。
**带层次的文件路径**
指定服务器上的文件路径来定位特指的资源。这与UNIX系统的文件目录结构相似。
**查询字符串**
针对已指定的文件路径内的资源，可以使用查询字符串传入任意参数。此项可选。
**片段标识符**
使用片段标识符通常可标记出已获取资源中的子资源（文档内的某个位置）​。但在RFC中并没有明确规定其使用方法。该项也为可选项。
**并不是所有的应用程序都符合RFC**
有一些用来制定HTTP协议技术标准的文档，它们被称为RFC（Request for Comments，征求修正意见书）​。

通常，**应用程序会遵照由RFC确定的标准实现**。可以说，RFC是互联网的设计文档，要是不按照RFC标准执行，就有可能导致无法通信的状况。比如，有一台Web服务器内的应用服务没有遵照RFC的标准实现，那Web浏览器就很可能无法访问这台服务器了。

由于不遵照RFC标准实现就无法进行HTTP协议通信，所以**基本上客户端和服务器端都会以RFC为标准来实现HTTP协议**。但也存在某些应用程序因客户端或服务器端的不同，而未遵照RFC标准，反而将自成一套的“标准”扩展的情况。

不按RFC标准来实现，当然也不必劳心费力让自己的“标准”符合其他所有的客户端和服务器端。但设想一下，如果这款应用程序的使用者非常多，那会发生什么情况？不难想象，其他的客户端或服务器端必然都不得不去配合它。

>**私有协议的价值：** 在特定、专业的场景中，为了追求更高的性能、安全或特定功能，设计和使用**私有协议**（Private Protocol）是可行的，甚至是更优的选择。

实际在互联网上，已经实现了HTTP协议的一些服务器端和客户端里就存在上述情况。说不定它们会与本书介绍的HTTP协议的实现情况不一样。
[HTTP-不同URI请求格式](notes/Archieve/HTTP-不同URI请求格式.md)







## todo/拓展
- [ ] URI和URL转换位=为原子笔记
- [ ] 可扩展性（Extensibility）具体内容，和URI关联
- [x] [协议作为规范的意思](notes/Archieve/协议作为规范的意思.md)
## Resource
- http://www.iana.org/assignments/uri-schemes
- [HTTP-不同URI请求格式](notes/Archieve/HTTP-不同URI请求格式.md)