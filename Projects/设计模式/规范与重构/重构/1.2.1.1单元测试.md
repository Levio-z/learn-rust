### 单元测试
定义：针对程序模块（软件设计的最小单元）来进行正确性校验的工作。
![](Pasted%20image%2020250605125947.png)
### 如何写好单元测试
考验程序员思维的缜密程度，看能否设计出覆盖各种正常及异常情况的测试用例，来保证代码在任何预期或非预期的情况下都能正确运行。
### 测试驱动开发
- 列清楚了要开发和测试的任务清单
- 识别清楚边缘情况
- 以最小增量开发代码
- 通过测试可以增加开发的信心
- 给了你重构的自由，测试是你的安全网
### 单元测试的好处
#### 有效帮助发现bug
这也节省了我很多 fix 低级 bug 的时间，能够有时间去做其他更有意义的事情。
#### 辅助设计
对于一段代码，如果**很难为其编写单元测试，或者单元测试写起来很吃力**，需要依靠单元测试框架里很高级的特性才能完成，那往往就意味着代码设计得不够合理，**代码高度耦合**
### **单元测试是对集成测试的有力补充**
集成测试也无法覆盖得很全面
#### 阅读单元测试能帮助你快速熟悉代码
单元测试用例实际上就是用户用例，反映了代码的功能和如何使用。
### 问题
#### 单测确实会耗费时间
管单元测试的代码量可能是被测代码本身的 1～2 倍，写的过程很繁琐，会耗费时间
#### 对单元测试的代码质量有什么要求吗？
单元测试毕竟不会在产线上运行，而且每个类的测试代码也比较独立，基本不互相依赖。所以，相对于被测代码，我们对单元测试代码的质量可以放低一些要求。命名稍微有些不规范，代码稍微有些重复，也都是没有问题的。
#### 单元测试只要覆盖率高？
将覆盖率作为衡量单元测试质量的唯一标准是不合理的
实际上，**过度关注单元测试的覆盖率会导致开发人员为了提高覆盖率**，写很多没有必要的测试代码，比如 get、set 方法非常简单，没有必要测试。
#### 写单元测试需要了解代码的实现逻辑吗
单元测试**不要依赖被测试函数的具体实现逻辑，它只关心被测函数实现了什么功能。**
- 我们切不可为了追求覆盖率，逐行阅读代码，然后针对实现逻辑编写单元测试。
#### 单元测试框架无法测试，多半是因为代码的可测试性不好
#### 单元测试为何难以落地
非常少，包括 BAT 这样级别公司的项目
- 写单元测试繁琐，没有太多挑战
- 当开发任务紧了之后，就开始放低对单元测试的要求
- 团队不能提供很好的支持和重视，往往觉得没有必要写单元测试，软件开发被视为劳动密集型而非智力密集型工作
	- 在现有的开发模式下，单元测试收益不高，甚至在开发过程中，既没有单元测试，也没有 Code Review 流程。
### 参考资料
- Java单元测试培训资料：https://github.com/Levio-z/UT-Company-training、