### 代码复用性
代码复用表示一种行为：我们在开发新功能的时候，尽量复用已经存在的代码。

首先，“不重复”并不代表“可复用”。
- 在一个项目代码中，可能不存在任何重复的代码，但也并不表示里面有可复用的代码，不重复和可复用完全是两个概念。
其次，“复用”和“可复用性”关注角度不同。
- 代码“可复用性”是从代码开发者的角度来讲的，“复用”是从代码使用者的角度来讲的。
都是为了
- 都是为了减少代码量，提高代码的可读性、可维护性。
### 怎么提高代码复用性？
#### 减少代码耦合
对于高度耦合的代码，当我们希望复用其中的一个功能，想把这个功能的代码抽取出来成为一个独立的模块、类或者函数的时候，**往往会发现牵一发而动全身。移动一点代码，就要牵连到很多其他相关的代码。**
所以，高度耦合的代码会影响到代码的复用性，我们要尽量减少代码耦合。

#### 满足单一职责原则
我们前面讲过，如果职责不够单一，模块、类设计得大而全，那依赖它的代码或者它依赖的代码就会比较多，进而增加了代码的耦合。根据上一点，也就会影响到代码的复用性。相反，越细粒度的代码，代码的通用性会越好，越容易被复用
#### 模块化
这里的“模块”，不单单指一组类构成的模块，还可以理解为单个类、函数。我们要善于将功能独立的代码，封装成模块。独立的模块就像一块一块的**积木**，更加容易复用，可以直接拿来搭建更加复杂的系统。
#### 业务与非业务逻辑分离
**越是跟业务无关的代码越是容易复用，越是针对特定业务的代码越难复用。**
所以，为了复用跟业务无关的代码，我们将业务和非业务逻辑代码分离，抽取成一些通用的框架、类库、组件等。
#### 通用代码下沉
从分层的角度来看，**越底层的代码越通用、会被越多的模块调用，越应该设计得足够可复用**。一般情况下，在代码分层之后，为了避免交叉调用导致调用关系混乱，我们只允许上层代码调用下层代码及同层代码之间的调用，杜绝下层代码调用上层代码。所以，通用的代码我们尽量下沉到更下层。
#### 继承、多态、抽象、封装
在讲面向对象特性的时候，我们讲到，
- 利用继承，可以将公共的代码抽取到父类，子类复用父类的属性和方法。
- 利用多态，我们可以动态地替换一段代码的部分逻辑，让这段代码可复用。
- 除此之外，抽象和封装，从更加广义的层面、而非狭义的面向对象特性的层面来理解的话，越抽象、越不依赖具体的实现，越容易复用。
- 代码封装成模块，隐藏可变的细节、暴露不变的接口，就越容易复用。
#### 应用模板等设计模式
- 比如，模板模式利用了多态来实现，可以灵活地替
换其中的部分代码，整个流程模板代码可复用。
#### 泛型编程等
有一些跟编程语言相关的特性，也能提高代码的复用性
- 在写代码的时候，我们要多去思考一下，这个部分代码是否可以抽取出来，作为一个独立的模块、类或者函数供多处使用。在设计每个模块、类、函数的时候，要像设计一个外部 API 那样，去思考它的复用性。
#### 辩证思考和灵活应用
- 已经有复用的需求场景，那根据复用的需求去开发可复用的代码，可能还不算难。
- 如果当下并没有复用的需求，我们只是希望现在编写的代码具有可复用的特点，
	- 除非有非常明确的复用需求，否则，为了暂时用不到的复用需求，花费太多的时间、精力，投入太多的开发成本，并不是一个值得推荐的做法。

- **Rule of Three**
	- 第一次编写代码的时候，**我们不考虑复用性**
	- 第二次遇到复用场景的时候，**再进行重构使其复用**。
	>需要注意的是，“Rule of Three”中的“Three”并不是真的就指确切的“三”，这里就是指“二”。

