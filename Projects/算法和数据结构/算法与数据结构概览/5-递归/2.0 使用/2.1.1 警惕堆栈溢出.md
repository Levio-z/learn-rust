### 警惕堆栈溢出

如果递归求解的数据规模很⼤，调⽤层次很深，⼀直压⼊栈，就会有堆栈溢出的⻛险。

#### 如何避免堆栈溢出
##### 限制递归调用的最大深度
我们可以通过在代码中限制递归调⽤的最⼤深度的⽅式来解决这个问题。递归调⽤超过⼀定深度（⽐如1000）之后，我们就不继续往下再递归了，直接返回报错。
伪代码：
```
// 全局变量，表示递归的深度
int depth  = 0;
int f(int n){
	++ depth;
	if (depth > 1000) throw exception;
	if (n==1) return 1;
	return f(n-1) + 1;
}
```
但这种做法并不能完全解决问题，**因为最⼤允许的递归深度跟当前线程剩余的栈空间⼤⼩有关，事先⽆法计算。如果实时计 算，代码过于复杂，就会影响代码的可读性**。所以，如果最⼤深度⽐较⼩，⽐如10、50，就可以⽤这种⽅法，否则**这种⽅法并不是很实⽤**。