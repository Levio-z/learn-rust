PIC默认的配置其实是无法使用的，因为它仅仅是将0-15之间的中断向量编号发送给了CPU，然而这些编号已经用在了CPU的异常编号中了，比如8号代指 double fault 异常。要修复这个错误，我们需要对PIC中断序号进行重映射，新的序号只需要避开已被定义的CPU异常即可，CPU定义的异常数量有32个，所以通常会使用32-47这个区段。

我们需要通过往指令和数据端口写入特定数据才能对配置进行编程，幸运的是已经有了一个名叫 [`pic8259`](https://docs.rs/pic8259/0.10.1/pic8259/) 的crate封装了这些东西，我们无需自己去处理这些初始化方面的细节。 如果你十分好奇其中的细节，这里是 [它的源码](https://docs.rs/crate/pic8259/0.10.1/source/src/lib.rs)，他的内部逻辑其实十分简洁，而且具备完善的文档。

我们可以这样将 crate 作为依赖加入工程中：
```toml
# in Cargo.toml

[dependencies]
pic8259 = "0.10.1"
```
这个 crate 提供的主要抽象结构就是 [`ChainedPics`](https://docs.rs/pic8259/0.10.1/pic8259/struct.ChainedPics.html)，用于映射上文所说的主副PIC的映射布局，它可以这样使用：
```rust
// in src/interrupts.rs

use pic8259::ChainedPics;
use spin;

pub const PIC_1_OFFSET: u8 = 32;
pub const PIC_2_OFFSET: u8 = PIC_1_OFFSET + 8;

pub static PICS: spin::Mutex<ChainedPics> =
    spin::Mutex::new(unsafe { ChainedPics::new(PIC_1_OFFSET, PIC_2_OFFSET) });
```