## ✅ 什么是管道（Pipe）？

### 📌 定义：

**管道是一种内核提供的缓冲区，允许一个进程写入数据，另一个进程读取这些数据。**

它本质上是一个**一进一出（单向）**的**内存缓存通道**，由操作系统管理。

#### 细节
 **读取速度慢，确实会导致写端阻塞**。这是管道（`pipe`）机制设计中的核心特性之一：**基于内核缓冲区的流控（flow control）与同步阻塞模型**。
- 管道（pipe）在创建时，由内核分配一个 **匿名的、不可寻址的缓冲区**，存在于内核空间，用于两个用户进程之间**安全且高效地传递数据**。

* * *

## 🔧 使用场景举例：

### 示例 1：Shell 中的管道命令

```sh
ls | grep ".rs"
```

含义是：

* `ls` 将目录内容写入 stdout；
    
* stdout 被“管道”到 `grep` 的 stdin；
    
* `grep` 从管道读取内容，筛选含 `.rs` 的行。
    

> Shell 使用 `|` 运算符将两个进程通过管道连接起来。

* * *

### 示例 2：Rust 程序中的标准输出被重定向到管道

假设你有一个 Rust 程序如下：

```rust
fn main() {
    println!("Hello, pipe!");
}
```

在命令行中运行：

```sh
cargo run --quiet | wc -c
```

含义：

* `cargo run` 生成的标准输出不是显示在终端；
    
* 而是被送入 `wc -c`，统计字节数（字符数）；
    
* `println!` 的输出变成了 `wc` 的输入，即进入了一个“管道”通道。
    

* * *

## 🔄 本质：Unix 管道是由操作系统内核创建的一对**文件描述符**：

```c
int fds[2];
pipe(fds);
```

其中：

* `fds[1]`: 写端（写入 pipe 的一方）；
    
* `fds[0]`: 读端（读取 pipe 的一方）；
    
* 内核在这两个描述符之间维护一个 FIFO 缓冲区。
    

* * *

## 🎯 特点总结：

| 特性 | 描述 |
| --- | --- |
| 单向传输 | 一个进程写，一个进程读（也有“命名管道”支持双向 |