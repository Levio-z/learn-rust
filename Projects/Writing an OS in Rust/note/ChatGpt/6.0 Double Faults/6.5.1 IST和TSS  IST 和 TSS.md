中断栈表（IST）其实是一个名叫 _[任务状态段](https://en.wikipedia.org/wiki/Task_state_segment)（TSS）_ 的古老遗留结构的一部分。 TSS是用来存储32位任务中的零碎信息，比如处理器寄存器的状态，一般用于 [硬件上下文切换](https://wiki.osdev.org/Context_Switching#Hardware_Context_Switching)。但是硬件上下文切换已经不再适用于64位模式，并且TSS的实际数据结构也已经发生了彻底的改变。

在 x86_64 架构中，TSS已经不再存储任何任务相关信息，取而代之的是两个栈表（IST正是其中之一）。 32位TSS和64位TSS唯一的共有字段恐怕就是指向 [I/O端口权限位图](https://en.wikipedia.org/wiki/Task_state_segment#I.2FO_port_permissions) 的指针了。

64位TSS的格式如下：

|字段|类型|
|---|---|
|(保留)|`u32`|
|特权栈表|`[u64; 3]`|
|(保留)|`u64`|
|中断栈表|`[u64; 7]`|
|(保留)|`u64`|
|(保留)|`u16`|
|I/O映射基准地址|`u16`|

_特权栈表_ 在 CPU 特权等级变更的时候会被用到。例如当 CPU 在用户态（特权等级3）中触发一个异常时，一般情况下 CPU 会在执行错误处理函数前切换到内核态（特权等级0），在这种情况下，CPU 会切换为特权栈表的第0层（0层是目标特权等级）。但是目前我们还没有用户态的程序，所以暂且可以忽略这个表。


