- https://os.phil-opp.com/zh-CN/disable-simd/

- 在裸机或某些高性能实时场景下，为了避免每次中断都要备份 512-1600 字节 SIMD 寄存器而带来的性能惩罚，有时需要显式禁用 MMX/SSE；
    
- 禁用后，内核中断上下文切换开销大幅降低，提升中断响应性能；
    
- 这种做法牺牲了部分 SIMD 优化，但在内核代码路径中通常是可以接受的。

禁用 MMX 和 SSE 的核心原因是为了**降低中断和上下文切换时的性能开销**，具体来说有以下几点：

---

## 1. 寄存器保存开销巨大

- MMX、SSE、AVX 等 SIMD 指令集对应的寄存器体积较大（SSE 是 128 位，AVX 是 256 位甚至更宽）；
- 每次发生上下文切换（如线程切换、内核中断）时，内核必须保存和恢复这些寄存器，避免数据丢失；
- 保存和恢复大寄存器组的开销很明显，会增加中断响应延迟和系统整体性能损耗。
---
## 2. SIMD 指令主要面向用户态计算

- SIMD 指令设计初衷是加速用户空间的并行计算任务（多媒体、科学计算等）；
    
- 内核代码通常不大量使用 SIMD 指令，因此完全禁用这部分上下文切换，反而能优化内核性能。
    