https://os.phil-opp.com/zh-CN/allocator-designs/#tao-lun-2

- 相较于使用后备分配器懒分配内存块，更好的做法是**预填块列表来提高初始分配的性能**。
- 为了简化实现，我们将块大小限制为2的幂，一便将它们用作块对齐方式。若通过其他方式存储（或计算）块对齐方式，我们可以添加更多块大小，如**常见分配尺寸，以减少内存浪费**。
- **我们目前仅创建新块，但从不再次释放它们**。这导致了内存碎片，最终可能导致大尺寸内存分配失败。**可能有必要为每个块大小设置最大列表长度。当达到最大长度时，后续的释放操作将使用后备分配器而不是添加到列表中。
- 相比于回退到链表分配器，我们也可以有一个专门的分配器用于大于4 KiB的分配。其基本思想是利用 [paging](https://os.phil-opp.com/paging-introduction/) ，它在4 KiB页面上操作，将连续的虚拟内存映射到非连续的物理帧。**这样，对于大型分配，未使用内存的碎片问题不再是问题。**
	- **物理内存的碎片化不影响分配**
	- 不需要寻找连续的物理内存块，只需要找到足够数量的**单个空闲帧**（4个）
- 有了这样的页分配器，我们就可以添加大于4 KiB的块大小，**同时完全放弃链表分配器。这样做的主要优势是减少碎片，提高性能可预测性，即更好的最坏情况性能**。
	- **合并困难**：相邻空闲块需要合并，但可能被已用块隔开
	- **长期累积**：运行时间越长，碎片化越严重
