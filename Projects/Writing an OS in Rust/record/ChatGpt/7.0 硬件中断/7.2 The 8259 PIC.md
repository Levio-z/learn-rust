[Intel 8259](https://en.wikipedia.org/wiki/Intel_8259) 是 1976 年推出的可编程中断控制器 （PIC）。它早已被较新的 [APIC](https://en.wikipedia.org/wiki/Intel_APIC_Architecture) 取代，但出于向后兼容性的原因，当前系统仍支持其接口。8259 PIC 比 APIC 更容易设置，因此，在后面的帖子中切换到 APIC 之前，我们将使用它来介绍中断。

8259 有八条中断线和几条用于与 CPU 通信的线。当时的典型系统配备了两个 8259 PIC 实例，一个主 PIC 和一个辅助 PIC，连接到主 PIC 的中断线之一：
```
                     ____________                          ____________
Real Time Clock --> |            |   Timer -------------> |            |
ACPI -------------> |            |   Keyboard-----------> |            |      _____
Available --------> | Secondary  |----------------------> | Primary    |     |     |
Available --------> | Interrupt  |   Serial Port 2 -----> | Interrupt  |---> | CPU |
Mouse ------------> | Controller |   Serial Port 1 -----> | Controller |     |_____|
Co-Processor -----> |            |   Parallel Port 2/3 -> |            |
Primary ATA ------> |            |   Floppy disk -------> |            |
Secondary ATA ----> |____________|   Parallel Port 1----> |____________|
```
此图显示了中断线的典型分配。我们看到 15 条线中的大多数都有固定的映射，例如，辅助 PIC 的第 4 行分配给鼠标。

每个控制器都可以通过两个 [I/O 端口](https://os.phil-opp.com/testing/#i-o-ports)进行配置，一个“命令”端口和一个“数据”端口。对于主控制器，这些端口是 `0x20`（命令）和 `0x21`（数据）。对于辅助控制器，它们是 `0xa0`（命令）和 `0xa1`（数据）。有关如何配置 PIC 的更多信息，请参阅[有关 osdev.org 的文章](https://wiki.osdev.org/8259_PIC) 。
[7.2.1IRQ 对应设备功能解析](7.2.1IRQ%20对应设备功能解析.md)

每个 PIC 通过 **两个 I/O 端口**配置：
- **命令端口（Command Port）**：发送控制命令，如初始化或 EOI。
- **数据端口（Data Port）**：读取/写入掩码寄存器、设置 IRQ 向量等。

|PIC 类型|命令端口|数据端口|
|---|---|---|
|Primary|0x20|0x21|
|Secondary|0xA0|0xA1|

通过这些端口，可：
1. **初始化 PIC**（ICW1–ICW4）
2. **屏蔽/启用特定 IRQ**
3. **发送 EOI（End of Interrupt）** 结束中断处理


### 实现
[7.2.2 实现](7.2.2%20实现.md)