### 原理
每一次核函数调用（`kernel<<<grid, block>>>(...)`）都有一个**启动开销**（launch overhead），通常在 **5–50 微秒**，具体取决于驱动版本和硬件架构。  
**如果核函数很轻量（比如只有几百个线程、计算量很小），这个启动开销可能比计算时间还长**。
### 问题
如果你的外部循环是这样：
```c++
for (int i = 0; i < N; i++) {
    kernel<<<grid, block>>>(...);
}
```
那么你会**重复产生 N 次启动开销**。
### **优化思路**
- **循环搬移**：把外部循环的逻辑放进核函数内部，由 GPU 自己在一次启动中完成所有迭代。
- 例如：
```C++
__global__ void kernel(...) {
    for (int i = 0; i < N; i++) {
        // 原外部循环的计算逻辑
    }
}
```
好处：减少了 CPU→GPU 的同步与调度成本，提高计算时间占比。
### **适用场景**  
核函数本身执行时间短、调用频率高时尤为有效。