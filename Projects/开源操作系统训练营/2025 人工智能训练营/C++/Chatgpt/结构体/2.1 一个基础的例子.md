## 📌 源码回顾

```cpp
struct S
{
    S() : m{42} {}
    S(int a) : m{a} {}
    int m;
};
```

这是一个非常典型的 C++ 类（严格来说是 `struct`，但在 C++ 中 `struct` 和 `class` 语义基本一致，除了默认访问权限）。

```cpp
struct Point3D {
    int x;
    int y;
    int z;

    // 构造函数，初始化多个成员
    Point3D(int a, int b, int c) : x{a}, y{b}, z{c} {}
};
```
---

## 🧱 一、结构体本身：`struct S`

-   `S` 是一个用户自定义的类型
    
-   它有一个数据成员：`int m`
    
-   提供了两个构造函数（一个默认构造，一个带参构造）
    

---

## 🔧 二、成员变量

```cpp
int m;
```

-   `m` 是结构体的一个**成员变量**
    
-   类型为 `int`
    
-   没有默认初始化（但会在构造函数中初始化）
    

---

## 🏗️ 三、构造函数详解

构造函数是创建对象时执行的函数，它负责初始化成员变量。

---

### 1️⃣ 默认构造函数

```cpp
S() : m{42} {}
```

-   ✅ 无参数
    
-   ✅ 初始化成员 `m` 为 42
    
-   使用 **成员初始化列表（member initializer list）** 来初始化
    
-   花括号 `{42}` 是 C++11 引入的 **列表初始化（uniform initialization）**，防止窄化等问题
    

**调用时机**：

```cpp
S s1;       // 会调用这个构造函数
```

---

### 2️⃣ 带参数构造函数

```cpp
S(int a) : m{a} {}
```

-   ✅ 接收一个参数 `a`（类型为 `int`）
    
-   ✅ 使用该参数初始化成员 `m`
    
-   同样使用列表初始化语法 `{a}`
    

**调用时机**：

```cpp
S s2(100);     // s2.m == 100
S s3 = S(77);  // s3.m == 77
```

---

## 🎯 四、语义与行为示例

```cpp
int main() {
    S s1;        // 调用默认构造，s1.m == 42
    S s2(99);    // 调用带参构造，s2.m == 99

    std::cout << s1.m << " " << s2.m << "\n";  // 输出 42 99
}
```

---

## 📚 五、构造函数初始化列表 vs 赋值区别（重要）

```cpp
S() : m{42} {}     // ✅ 初始化（推荐）

// vs
S() {
    m = 42;        // ❌ 先默认构造，再赋值（效率低）
}
```

> ✅ 初始化列表方式可以直接构造成员，避免临时赋值。对于类成员或 `const`、`reference` 成员更是**必须**用初始化列表。

---

## 🧠 总结

| 成员 | 类型 | 初始化方式 | 构造时行为 |
| --- | --- | --- | --- |
| `int m` | 成员变量 | 初始化列表 `{}` | 直接初始化，性能优 |
| `S()` | 构造函数 | 默认构造，`m=42` | s1.m == 42 |
| `S(int a)` | 构造函数 | `m=a` | s2.m == a |

---
