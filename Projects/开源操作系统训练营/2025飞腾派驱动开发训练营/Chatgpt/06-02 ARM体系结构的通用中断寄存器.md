**GIC（Generic Interrupt Controller）** 相关的一系列寄存器，用于管理中断的分发、中断优先级、屏蔽、使能、应答等操作。

ARM 的 GIC 是从 **ARMv7** 开始引入的标准中断控制器架构，并在 **ARMv8** 中继续扩展，目前主流使用版本包括 **GICv2、GICv3 和 GICv4**。

### 一、GIC 架构简介
| 组件                        | 作用                                       |
| ------------------------- | ---------------------------------------- |
| Distributor               | 全局分发器，负责将中断分配给目标 CPU                     |
| CPU Interface             | 每个处理器核上的接口，用于接收和响应中断                     |
| Redistributor             | 从 GICv3 开始引入，代替原先 CPU Interface，支持更多中断优化 |
| Interrupt Controller（GIC） | 所有中断控制逻辑的统称                              |
|                           |                                          |
- 分发器系统中的所有中断源都连接到该单元。
	- 可以通过寄存器来控制各个中断源的属性。
		- 例如优先级、状态、安全性、路由信息和使能状态。
- cpu接口单元的寄存器
	- 屏蔽、识别、控制转发到cpu核的中断的状态。
	- 软件使用中断id识别中断源并调用相应的处理程序处理中断

![](asserts/Pasted%20image%2020250707155700.png)
## 二、常见 GIC 中的通用中断寄存器（以 GICv2 为例）

下面分模块介绍常见的中断相关寄存器：
### 1. Distributor 寄存器（控制中断的分发）
[06-0201 GICD 寄存器](06-0201%20GICD%20寄存器.md)
### 2. CPU Interface 寄存器（处理器核对中断的访问）
[06-0202 GICC寄存器](06-0202%20GICC寄存器.md)
## 三、GICv3 新增寄存器（部分）

GICv3 后，将原来的 CPU Interface 拆分为两个部分：**System Register 接口** 和 **Redistributor 接口**。

### 示例 GICv3 System Register（部分）

这些可以通过系统寄存器指令（MRS/MSR）直接访问：

|名称|描述|
|---|---|
|ICC_CTLR_EL1|CPU 接口控制寄存器|
|ICC_PMR_EL1|优先级屏蔽寄存器|
|ICC_IAR1_EL1|中断应答寄存器|
|ICC_EOIR1_EL1|结束中断寄存器|
|ICC_SGI1R_EL1|发送 SGI（Software Generated Interrupt）|
|ICC_SRE_EL1|使能系统寄存器接口访问|

## 四、中断类型

[06-0203 中断类型](06-0203%20中断类型.md)

## 五、使用场景

### 1. 中断初始化阶段
- 启用 GIC Distributor 和 CPU Interface（GICD_CTLR, GICC_CTLR）
- 配置中断优先级、目标 CPU（GICD_IPRIORITYRn, GICD_ITARGETSRn）
- 设置触发方式（GICD_ICFGRn）
    

### 2. 中断处理阶段
- CPU 读取 GICC_IAR 获取中断号
- 执行 ISR（中断服务程序）
- 写入 GICC_EOIR 表示中断处理完成