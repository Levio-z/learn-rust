```
version: '3.8'

  

# 在这里编写你的 docker-compose.yml 文件

services:

  mysql:

    image: mysql:8.0

    container_name: my-mysql

    restart: unless-stopped
    
	environment:

      MYSQL_ROOT_PASSWORD: rootpassword
    volumes:

      - mysql-data:/var/lib/mysql

      - ./init.sql:/docker-entrypoint-initdb.d/init.sql:ro



    ports:

      - "3306:3306"

  
  

# 定义持久化存储卷

volumes:
  mysql-data:
```

### 测试
```
docker exec -it my-mysql mysql -uroot -p
```
### 环境变量
- 时区
- 自动创建数据库
```
    # 设置 MySQL root 密码，建议从 .env 文件中读取
    environment:
      MYSQL_ROOT_PASSWORD: ${MYSQL_ROOT_PASSWORD}
      MYSQL_DATABASE: testdb  # 可选：自动创建数据库（与 init.sql 不冲突）
      TZ: Asia/Shanghai       # 设置时区
```
### 心跳检查
在mysql底下设置·
```
    # 容器健康检查：确保服务启动成功后才被标记为“健康”
    healthcheck:
      test: ["CMD-SHELL", "mysqladmin ping -h localhost -p$${MYSQL_ROOT_PASSWORD}"]
      interval: 10s
      timeout: 5s
      retries: 5
      start_period: 20s
```