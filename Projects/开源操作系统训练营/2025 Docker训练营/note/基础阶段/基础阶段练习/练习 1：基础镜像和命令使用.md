```
# 练习 1：基础镜像和命令使用

#

# 要求：

# 1. 使用 ubuntu:22.04 作为基础镜像

# 2. 安装 nginx 和 curl 包

# 3. 创建一个简单的 HTML 文件，内容为 "Hello Docker!"

# 4. 将 HTML 文件复制到 nginx 的默认网站目录

# 5. 暴露 80 端口

# 6. 启动 nginx 服务

#

# 提示：

# - 使用 apt-get update 和 apt-get install 安装软件包

# - nginx 的默认网站目录是 /var/www/html/

# - 使用 CMD 或 ENTRYPOINT 启动 nginx

#

# 完成这个 Dockerfile 后，构建镜像并运行容器，访问 http://localhost:8080 应该能看到 "Hello Docker!" 页面

  

FROM ubuntu:22.04

  

 # 定义构建参数

 ARG PORT=80

 # 设置环境变量

 ENV PORT=${PORT}  

  

# 在这里编写你的 Dockerfile 指令

  

# 安装 curl 和 nginx，避免缓存，减少镜像体积

RUN apt-get update && \

    apt-get install -y --no-install-recommends curl nginx && \

    apt-get clean && \

    rm -rf /var/lib/apt/lists/*

  

# -y：自动回答“yes”，无需人工确认。

# --no-install-recommends：只安装最小必要依赖，避免推荐性（非必需）依赖造成镜像膨胀。

# apt-get clean 清理 apt 缓存（/var/cache/apt/archives）

# rm -rf /var/lib/apt/lists/* 删除已下载的包索引，进一步减小镜像体积

  

RUN echo "<h1>Hello Docker!</h1>" > /var/www/html/index.html

  

EXPOSE ${PORT}

  

# 6. 启动 nginx 服务（前台运行，防止容器退出）

CMD ["nginx", "-g", "daemon off;"]

  

# 测试命令：

# docker build -t exercise1 .

# docker run -d -p 8080:80 exercise1

# curl -s http://127.0.0.1:8080 | grep -q "Hello Docker" && echo "Found" || echo "Not Found"
```