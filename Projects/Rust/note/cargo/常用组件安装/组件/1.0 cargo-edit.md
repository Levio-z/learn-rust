安装后，你会获得以下 3 个主要子命令：

---

### 1️⃣ `cargo add`

> ✅ 向 `Cargo.toml` 添加依赖项，自动处理版本、特性、类型（dev/build）等。

#### 常见用法：

```bash
cargo add serde                       # 添加 serde 到 dependencies
cargo add tokio --features full       # 添加 tokio 并启用 full 特性
cargo add anyhow@1.0.75               # 指定版本
cargo add rstest --dev                # 添加到 [dev-dependencies]
cargo add cc --build                  # 添加到 [build-dependencies]
```

✅ 自动解析最新版本  
✅ 自动添加 `features`、`optional`  
✅ 不用手动修改 `Cargo.toml`

---

### 2️⃣ `cargo rm`

> ❌ 从 `Cargo.toml` 中移除依赖项。

#### 用法示例：

```bash
cargo rm serde
cargo rm anyhow --dev
```

会从相应的 `[dependencies]` / `[dev-dependencies]` / `[build-dependencies]` 中移除指定项。

---

### 3️⃣ `cargo upgrade`

> ⬆️ 将 `Cargo.toml` 中的依赖升级为最新版本（或指定版本）

#### 用法示例：

```bash
cargo upgrade                       # 升级全部依赖到最新稳定版
cargo upgrade serde                 # 升级某一个依赖
cargo upgrade --incompatible        # 允许升级到破坏性版本（major change）
cargo upgrade tokio@1.37.0          # 升级 tokio 到指定版本
```

> 它会根据 crates.io 的最新版本修改你的 `Cargo.toml`，并保持 `Cargo.lock` 同步更新。

---

## 🔧 其他可选功能

| 命令                                              | 功能                                          | 是否常用  |
| ----------------------------------------------- | ------------------------------------------- | ----- |
| `cargo set-version`                             | 设置当前 crate 的版本（如 `cargo set-version 1.2.3`） | ⭐ 中等  |
| `cargo upgrade --precise 1.3.0`                 | 精确地升级到某版本（避免范围推断）                           | ⭐⭐ 常用 |
| `cargo add foo --optional`                      | 添加为可选依赖（可配合 feature 使用）                     | ⭐⭐ 推荐 |
| `cargo add foo --target wasm32-unknown-unknown` | 为特定目标平台添加依赖                                 | 🔧 高级 |

---

## 🧩 实用组合：配合 Feature 使用

```bash
cargo add serde --features derive --optional
```

等价于：

```toml
[dependencies]
serde = { version = "1.0", optional = true, features = ["derive"] }
```

这在构建模块化或插件式架构时非常有用。

---

## 🧪 版本说明与稳定性

-   `cargo-edit 1.0+` 版本已经非常稳定，推荐在所有 Rust 工程中安装。
    
-   它使用稳定的 Rust 编译，无需 nightly。
    
-   已被许多 IDE 与工具链集成（如 VSCode 插件、JetBrains Rust 等）。
    

---

## 总结

| 命令 | 作用 | 等价于手动 |
| --- | --- | --- |
| `cargo add serde` | 添加依赖 | 修改 `Cargo.toml` 手动写入依赖项 |
| `cargo rm serde` | 删除依赖 | 手动删除 `Cargo.toml` 中的条目 |
| `cargo upgrade` | 升级依赖 | 手动查版本 + 修改 + `cargo update` |

---