`attr`ï¼ˆattributesï¼Œå±æ€§ï¼‰æ˜¯ **C++11 èµ·å¼•å…¥çš„æ–°è¯­è¨€æœºåˆ¶**ï¼Œç”¨äº**å‘ç¼–è¯‘å™¨ä¼ è¾¾é¢å¤–çš„å…ƒä¿¡æ¯**ï¼Œæ¯”å¦‚ï¼š

-   è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼ä¸èƒ½è¢«å¿½ç•¥ï¼›
-   è¿™ä¸ªå‡½æ•°æˆ–å˜é‡å¯èƒ½åºŸå¼ƒï¼ˆdeprecateï¼‰ï¼›
-   ç¼–è¯‘å™¨åº”å‘å‡ºè­¦å‘Šæˆ–åšä¼˜åŒ–ï¼›
-   ä¸€äº› ABIã€å¯¹é½ã€å†…è”æ§åˆ¶æŒ‡ä»¤ç­‰ã€‚

---

## âœ… ä¸€ã€ä»€ä¹ˆæ˜¯ `[[attribute]]`ï¼ˆå±æ€§ï¼‰

å±æ€§ï¼ˆ`attribute`ï¼‰æ˜¯ç”¨æ¥å‘Šè¯‰ç¼–è¯‘å™¨ï¼š

> â€œè¿™æ®µä»£ç æˆ‘ä¸æ˜¯å†™é”™äº†ï¼Œæˆ‘æ˜¯æœ‰æ„ä¸ºä¹‹â€ï¼Œæˆ–è€… â€œè¿™ä¸ªå‡½æ•°/å˜é‡æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œä½ åº”è¯¥ç‰¹åˆ«å¯¹å¾…â€ã€‚

å…¶è¯­æ³•å½¢å¼ä¸ºï¼š

```cpp
[[attribute_name]]
[[attribute_name(parameters)]]
```

ä¾‹å¦‚ï¼š

```cpp
[[nodiscard]] int compute();            // è¡¨ç¤ºè¿”å›å€¼ä¸èƒ½è¢«å¿½ç•¥
[[deprecated]] void old_api();          // è¡¨ç¤ºæ­¤å‡½æ•°å·²åºŸå¼ƒ
[[noreturn]] void panic();              // è¡¨ç¤ºæ­¤å‡½æ•°ä¸ä¼šè¿”å›
```

---

## ğŸ” äºŒã€å¸¸è§æ ‡å‡†å±æ€§åˆ—è¡¨ï¼ˆC++11 èµ·ï¼‰

| å±æ€§ | å¼•å…¥ç‰ˆæœ¬ | ç”¨é€”è¯´æ˜ |
| --- | --- | --- |
| `[[nodiscard]]` | C++17 | è‹¥è°ƒç”¨è€…å¿½ç•¥è¿”å›å€¼ï¼Œç¼–è¯‘å™¨ç»™å‡ºè­¦å‘Š |
| `[[noreturn]]` | C++11 | è¡¨ç¤ºå‡½æ•°ä¸ä¼šè¿”å›ï¼ˆå¦‚ `exit`, `abort`ï¼‰ |
| `[[deprecated]]` | C++14 | è¡¨ç¤ºæŸå‡½æ•°/å˜é‡å·²åºŸå¼ƒï¼Œå»ºè®®ä¸å†ä½¿ç”¨ |
| `[[maybe_unused]]` | C++17 | é˜²æ­¢æœªä½¿ç”¨çš„å˜é‡æˆ–å‡½æ•°äº§ç”Ÿè­¦å‘Š |
| `[[likely]]`, `[[unlikely]]` | C++20 | ç”¨äº if è¯­å¥åˆ†æ”¯é¢„æµ‹æç¤º |
| `[[gnu::always_inline]]` | GCC æ‰©å±• | å¼ºåˆ¶å†…è”å‡½æ•°ï¼ˆéæ ‡å‡†ï¼‰ |

---

## ğŸ¯ ä¸‰ã€ç¤ºä¾‹è¯¦è§£

### âœ… `[[nodiscard]]`

```cpp
[[nodiscard]] int result();

int main() {
    result(); // âš ï¸ è­¦å‘Šï¼šå¿½ç•¥äº† [[nodiscard]] å‡½æ•°çš„è¿”å›å€¼
}
```

> æ„å›¾ï¼šè¿”å›å€¼å¾ˆé‡è¦ï¼Œä¸åº”è¢«æ‚„æ‚„å¿½ç•¥ï¼Œæ¯”å¦‚é”™è¯¯ç ã€è®¡ç®—ç»“æœã€‚

### âœ… `[[noreturn]]`

```cpp
[[noreturn]] void fatal() {
    throw std::runtime_error("fatal error");
}
```

> ç¼–è¯‘å™¨çŸ¥é“è¿™ä¸ªå‡½æ•°**ä¸ä¼šè¿”å›**ï¼Œå› æ­¤å¯ä¼˜åŒ–è°ƒç”¨åçš„ä»£ç è·¯å¾„ã€‚

### âœ… `[[deprecated("reason")]]`

```cpp
[[deprecated("use new_func() instead")]]
void old_func();
```