---
tags:
  - fleeting
---
## 1. 核心观点  

这允许所有用户拥有相同的已发布 URL，并且对等方会自动选择他们可用的最有效的传输。Git **智能客户端**会**优先尝试**使用更高效的 **“智能协议”** 来连接 Git 仓库的 URL。如果服务器不支持“智能协议”，客户端会**自动回退（fall back）**并使用兼容性更好的 **“哑协议”**。

## 2. 背景/出处  
- 来源：
- 引文/摘要：  
  - …  
  - …  

## 3. 展开说明  
### Git 的两种 HTTP 传输协议

Git 支持两种通过 HTTP 工作的协议，以方便通过标准的 Web 服务器进行操作：

### 1. "哑" 协议 (The Dumb Protocol)

- **特点:** 顾名思义，它非常“哑”（简单/不智能）。它只需要服务器提供静态文件服务，也就是标准的 HTTP 服务器功能。
- **工作方式:** 客户端通过一系列 HTTP `GET` 请求来获取 Git 仓库中的文件，例如 `objects` 目录中的文件、`HEAD` 文件、`refs` 文件等。
- **限制:**
    - **效率低:** 每次传输都是原始的、**未压缩**的 Git 对象文件，非常低效。
    - **无法协商:** 客户端和服务器之间没有智能的协商过程，无法确定哪些文件是客户端需要的，哪些是不需要的。
    - **只读:** 通常只能用于克隆 (clone) 或拉取 (fetch) 操作，不支持推送 (push)。

### 2. "智能" 协议 (The Smart Protocol)

- **特点:** 这是目前主流和推荐的协议。它需要服务器端运行一个 Git 感知的程序，通常是 CGI 脚本、Git 自带的 `git-http-backend` 或其他服务器模块。
- **工作方式:**
    - **服务发现:** 客户端首先请求一个特殊 URL（例如 `/info/refs?service=git-upload-pack`），服务器端的程序会响应一个包含**可用引用（references）列表和协议版本信息的响应**。
    - **协商传输:** 客户端随后通过 **`POST`** 请求发送数据，服务器端的程序（如 `git-upload-pack` 或 `git-receive-pack`）会运行，动态生成高度优化的 **Packfile**（一个包含多个压缩对象的单个文件）。
    - **优势:**
        - **高效:** 使用 Packfile 传输，数据经过高度压缩，并仅发送客户端缺少的对象。
        - **双向:** 支持克隆、拉取（`git-upload-pack`）和 **推送**（`git-receive-pack`）操作。
        - **智能协商:** 像 SSH 或 Git 专属协议一样，客户端和服务器可以智能地协商需要传输的数据。

简而言之：**智能协议** 使用 **`POST`** 请求，更高效，支持推送；**哑协议** 使用 **`GET`** 请求，效率低，通常只支持拉取。

## 4. 与其他卡片的关联  
- 前置卡片：
- 后续卡片：
- 相似主题：

## 5. 应用/启发  
- 可以如何应用在工作、学习、生活中  
- 引发的思考与问题  

## 6. 待办/进一步探索  
 
  
